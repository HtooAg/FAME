/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/me/route";
exports.ids = ["app/api/auth/me/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "?d272":
/*!********************************!*\
  !*** supports-color (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ASUS_Downloads_fame_event_manager_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/me/route.ts */ \"(rsc)/./app/api/auth/me/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/me/route\",\n        pathname: \"/api/auth/me\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/me/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\fame-event-manager\\\\app\\\\api\\\\auth\\\\me\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ASUS_Downloads_fame_event_manager_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/me/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBU1VTJTVDRG93bmxvYWRzJTVDZmFtZS1ldmVudC1tYW5hZ2VyJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNBU1VTJTVDRG93bmxvYWRzJTVDZmFtZS1ldmVudC1tYW5hZ2VyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvP2IxMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcQVNVU1xcXFxEb3dubG9hZHNcXFxcZmFtZS1ldmVudC1tYW5hZ2VyXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxtZVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9tZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvbWVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvbWUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxBU1VTXFxcXERvd25sb2Fkc1xcXFxmYW1lLWV2ZW50LW1hbmFnZXJcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXG1lXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL21lL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/me/route.ts":
/*!**********************************!*\
  !*** ./app/api/auth/me/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_gcs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/gcs */ \"(rsc)/./lib/gcs.ts\");\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"dev-secret-do-not-use-in-prod\";\nasync function GET(request) {\n    try {\n        const token = request.cookies.get(\"auth-token\")?.value;\n        if (!token) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"No token\"\n        }, {\n            status: 401\n        });\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        // First check users index (for approved users)\n        const users = await (0,_lib_gcs__WEBPACK_IMPORTED_MODULE_2__.readJsonFile)(_lib_gcs__WEBPACK_IMPORTED_MODULE_2__.paths.usersIndex, []);\n        let user = users.find((u)=>u.id === decoded.userId);\n        console.log(\"User lookup result:\", {\n            userId: decoded.userId,\n            found: !!user\n        }); // Debug log\n        // Special handling for super admin\n        if (decoded.role === \"super_admin\") {\n            const adminUser = users.find((u)=>u.role === \"super_admin\" && u.id === decoded.userId);\n            if (adminUser) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    id: adminUser.id,\n                    email: adminUser.email,\n                    name: adminUser.name,\n                    role: \"super_admin\",\n                    accountStatus: \"active\",\n                    subscriptionStatus: \"active\"\n                });\n            }\n        }\n        // If not found in users index, check registrations (for pending users)\n        if (!user) {\n            const registrations = await (0,_lib_gcs__WEBPACK_IMPORTED_MODULE_2__.readJsonDirectory)(_lib_gcs__WEBPACK_IMPORTED_MODULE_2__.paths.registrationStageManagerDir);\n            user = registrations.find((r)=>r.id === decoded.userId);\n            console.log(\"Registration lookup result:\", {\n                userId: decoded.userId,\n                found: !!user\n            }); // Debug log\n        }\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"User not found\"\n        }, {\n            status: 404\n        });\n        // Check account status (super_admin bypasses most checks)\n        if (user.role !== \"super_admin\") {\n            if (user.accountStatus === \"suspended\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Account suspended\",\n                    accountStatus: \"suspended\"\n                }, {\n                    status: 403\n                });\n            }\n            if (user.accountStatus === \"deactivated\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Account deactivated\",\n                    accountStatus: \"deactivated\"\n                }, {\n                    status: 403\n                });\n            }\n            if (user.accountStatus === \"rejected\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Account rejected\",\n                    accountStatus: \"rejected\"\n                }, {\n                    status: 403\n                });\n            }\n            // Allow pending users to get their data but they'll be redirected appropriately\n            if (user.accountStatus === \"pending\") {\n            // Return user data but the frontend will handle redirection\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            id: user.id,\n            email: user.email,\n            name: user.name,\n            role: user.role,\n            eventId: user.eventId,\n            accountStatus: user.accountStatus,\n            subscriptionStatus: user.subscriptionStatus,\n            subscriptionEndDate: user.subscriptionEndDate\n        });\n    } catch (error) {\n        console.error(\"Me error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid token\"\n        }, {\n            status: 401\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQ3hCVSxJQUFJSCxLQUFLRyxFQUFFO1lBQ1hPLE9BQU9WLEtBQUtVLEtBQUs7WUFDakJDLE1BQU1YLEtBQUtXLElBQUk7WUFDZkgsTUFBTVIsS0FBS1EsSUFBSTtZQUNmUyxTQUFTakIsS0FBS2lCLE9BQU87WUFDckJMLGVBQWVaLEtBQUtZLGFBQWE7WUFDakNDLG9CQUFvQmIsS0FBS2Esa0JBQWtCO1lBQzNDSyxxQkFBcUJsQixLQUFLa0IsbUJBQW1CO1FBQzlDO0lBQ0QsRUFBRSxPQUFPeEIsT0FBTztRQUNmVyxRQUFRWCxLQUFLLENBQUMsYUFBYUE7UUFDM0IsT0FBT2YscURBQVlBLENBQUNjLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWdCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3BFO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vYXBwL2FwaS9hdXRoL21lL3JvdXRlLnRzP2M3MjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgeyByZWFkSnNvbkZpbGUsIHJlYWRKc29uRGlyZWN0b3J5LCBwYXRocyB9IGZyb20gXCJAL2xpYi9nY3NcIjtcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJkZXYtc2VjcmV0LWRvLW5vdC11c2UtaW4tcHJvZFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgdG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KFwiYXV0aC10b2tlblwiKT8udmFsdWU7XG5cdFx0aWYgKCF0b2tlbilcblx0XHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk5vIHRva2VuXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcblxuXHRcdGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBhbnk7XG5cblx0XHQvLyBGaXJzdCBjaGVjayB1c2VycyBpbmRleCAoZm9yIGFwcHJvdmVkIHVzZXJzKVxuXHRcdGNvbnN0IHVzZXJzID0gYXdhaXQgcmVhZEpzb25GaWxlPGFueVtdPihwYXRocy51c2Vyc0luZGV4LCBbXSk7XG5cdFx0bGV0IHVzZXIgPSB1c2Vycy5maW5kKCh1KSA9PiB1LmlkID09PSBkZWNvZGVkLnVzZXJJZCk7XG5cblx0XHRjb25zb2xlLmxvZyhcIlVzZXIgbG9va3VwIHJlc3VsdDpcIiwge1xuXHRcdFx0dXNlcklkOiBkZWNvZGVkLnVzZXJJZCxcblx0XHRcdGZvdW5kOiAhIXVzZXIsXG5cdFx0fSk7IC8vIERlYnVnIGxvZ1xuXG5cdFx0Ly8gU3BlY2lhbCBoYW5kbGluZyBmb3Igc3VwZXIgYWRtaW5cblx0XHRpZiAoZGVjb2RlZC5yb2xlID09PSBcInN1cGVyX2FkbWluXCIpIHtcblx0XHRcdGNvbnN0IGFkbWluVXNlciA9IHVzZXJzLmZpbmQoXG5cdFx0XHRcdCh1KSA9PiB1LnJvbGUgPT09IFwic3VwZXJfYWRtaW5cIiAmJiB1LmlkID09PSBkZWNvZGVkLnVzZXJJZFxuXHRcdFx0KTtcblx0XHRcdGlmIChhZG1pblVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcblx0XHRcdFx0XHRpZDogYWRtaW5Vc2VyLmlkLFxuXHRcdFx0XHRcdGVtYWlsOiBhZG1pblVzZXIuZW1haWwsXG5cdFx0XHRcdFx0bmFtZTogYWRtaW5Vc2VyLm5hbWUsXG5cdFx0XHRcdFx0cm9sZTogXCJzdXBlcl9hZG1pblwiLFxuXHRcdFx0XHRcdGFjY291bnRTdGF0dXM6IFwiYWN0aXZlXCIsXG5cdFx0XHRcdFx0c3Vic2NyaXB0aW9uU3RhdHVzOiBcImFjdGl2ZVwiLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiBub3QgZm91bmQgaW4gdXNlcnMgaW5kZXgsIGNoZWNrIHJlZ2lzdHJhdGlvbnMgKGZvciBwZW5kaW5nIHVzZXJzKVxuXHRcdGlmICghdXNlcikge1xuXHRcdFx0Y29uc3QgcmVnaXN0cmF0aW9ucyA9IGF3YWl0IHJlYWRKc29uRGlyZWN0b3J5PGFueT4oXG5cdFx0XHRcdHBhdGhzLnJlZ2lzdHJhdGlvblN0YWdlTWFuYWdlckRpclxuXHRcdFx0KTtcblx0XHRcdHVzZXIgPSByZWdpc3RyYXRpb25zLmZpbmQoKHIpID0+IHIuaWQgPT09IGRlY29kZWQudXNlcklkKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiUmVnaXN0cmF0aW9uIGxvb2t1cCByZXN1bHQ6XCIsIHtcblx0XHRcdFx0dXNlcklkOiBkZWNvZGVkLnVzZXJJZCxcblx0XHRcdFx0Zm91bmQ6ICEhdXNlcixcblx0XHRcdH0pOyAvLyBEZWJ1ZyBsb2dcblx0XHR9XG5cblx0XHRpZiAoIXVzZXIpXG5cdFx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG5cdFx0XHRcdHsgZXJyb3I6IFwiVXNlciBub3QgZm91bmRcIiB9LFxuXHRcdFx0XHR7IHN0YXR1czogNDA0IH1cblx0XHRcdCk7XG5cblx0XHQvLyBDaGVjayBhY2NvdW50IHN0YXR1cyAoc3VwZXJfYWRtaW4gYnlwYXNzZXMgbW9zdCBjaGVja3MpXG5cdFx0aWYgKHVzZXIucm9sZSAhPT0gXCJzdXBlcl9hZG1pblwiKSB7XG5cdFx0XHRpZiAodXNlci5hY2NvdW50U3RhdHVzID09PSBcInN1c3BlbmRlZFwiKSB7XG5cdFx0XHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcblx0XHRcdFx0XHR7IGVycm9yOiBcIkFjY291bnQgc3VzcGVuZGVkXCIsIGFjY291bnRTdGF0dXM6IFwic3VzcGVuZGVkXCIgfSxcblx0XHRcdFx0XHR7IHN0YXR1czogNDAzIH1cblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHVzZXIuYWNjb3VudFN0YXR1cyA9PT0gXCJkZWFjdGl2YXRlZFwiKSB7XG5cdFx0XHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRlcnJvcjogXCJBY2NvdW50IGRlYWN0aXZhdGVkXCIsXG5cdFx0XHRcdFx0XHRhY2NvdW50U3RhdHVzOiBcImRlYWN0aXZhdGVkXCIsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7IHN0YXR1czogNDAzIH1cblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHVzZXIuYWNjb3VudFN0YXR1cyA9PT0gXCJyZWplY3RlZFwiKSB7XG5cdFx0XHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRlcnJvcjogXCJBY2NvdW50IHJlamVjdGVkXCIsXG5cdFx0XHRcdFx0XHRhY2NvdW50U3RhdHVzOiBcInJlamVjdGVkXCIsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7IHN0YXR1czogNDAzIH1cblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWxsb3cgcGVuZGluZyB1c2VycyB0byBnZXQgdGhlaXIgZGF0YSBidXQgdGhleSdsbCBiZSByZWRpcmVjdGVkIGFwcHJvcHJpYXRlbHlcblx0XHRcdGlmICh1c2VyLmFjY291bnRTdGF0dXMgPT09IFwicGVuZGluZ1wiKSB7XG5cdFx0XHRcdC8vIFJldHVybiB1c2VyIGRhdGEgYnV0IHRoZSBmcm9udGVuZCB3aWxsIGhhbmRsZSByZWRpcmVjdGlvblxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG5cdFx0XHRpZDogdXNlci5pZCxcblx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0cm9sZTogdXNlci5yb2xlLFxuXHRcdFx0ZXZlbnRJZDogdXNlci5ldmVudElkLFxuXHRcdFx0YWNjb3VudFN0YXR1czogdXNlci5hY2NvdW50U3RhdHVzLFxuXHRcdFx0c3Vic2NyaXB0aW9uU3RhdHVzOiB1c2VyLnN1YnNjcmlwdGlvblN0YXR1cyxcblx0XHRcdHN1YnNjcmlwdGlvbkVuZERhdGU6IHVzZXIuc3Vic2NyaXB0aW9uRW5kRGF0ZSxcblx0XHR9KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFwiTWUgZXJyb3I6XCIsIGVycm9yKTtcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHRva2VuXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcblx0fVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImp3dCIsInJlYWRKc29uRmlsZSIsInJlYWRKc29uRGlyZWN0b3J5IiwicGF0aHMiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIkdFVCIsInJlcXVlc3QiLCJ0b2tlbiIsImNvb2tpZXMiLCJnZXQiLCJ2YWx1ZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImRlY29kZWQiLCJ2ZXJpZnkiLCJ1c2VycyIsInVzZXJzSW5kZXgiLCJ1c2VyIiwiZmluZCIsInUiLCJpZCIsInVzZXJJZCIsImNvbnNvbGUiLCJsb2ciLCJmb3VuZCIsInJvbGUiLCJhZG1pblVzZXIiLCJlbWFpbCIsIm5hbWUiLCJhY2NvdW50U3RhdHVzIiwic3Vic2NyaXB0aW9uU3RhdHVzIiwicmVnaXN0cmF0aW9ucyIsInJlZ2lzdHJhdGlvblN0YWdlTWFuYWdlckRpciIsInIiLCJldmVudElkIiwic3Vic2NyaXB0aW9uRW5kRGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/me/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gcs.ts":
/*!********************!*\
  !*** ./lib/gcs.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GCSManager: () => (/* binding */ GCSManager),\n/* harmony export */   createArtistDataStructure: () => (/* binding */ createArtistDataStructure),\n/* harmony export */   deleteFromArrayFile: () => (/* binding */ deleteFromArrayFile),\n/* harmony export */   gcsManager: () => (/* binding */ gcsManager),\n/* harmony export */   paths: () => (/* binding */ paths),\n/* harmony export */   readJsonDirectory: () => (/* binding */ readJsonDirectory),\n/* harmony export */   readJsonFile: () => (/* binding */ readJsonFile),\n/* harmony export */   upsertArrayFile: () => (/* binding */ upsertArrayFile),\n/* harmony export */   writeJsonFile: () => (/* binding */ writeJsonFile)\n/* harmony export */ });\n/* harmony import */ var _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./google-cloud-storage */ \"(rsc)/./lib/google-cloud-storage.ts\");\n// Google Cloud Storage utility functions\n// Note: This is a simplified implementation for demonstration\n// In production, you would use the actual Google Cloud Storage SDK\n\n// File paths configuration\nconst paths = {\n    usersIndex: \"users/index.json\",\n    registrationStageManagerDir: \"registrations/stage-managers\",\n    registrationArtistDir: \"registrations/artists\",\n    eventsIndex: \"events/index.json\",\n    stageManagersIndex: \"stage-managers/index.json\",\n    superAdminsIndex: \"super-admins/index.json\",\n    globalArtistsIndex: \"artists/index.json\",\n    stageManagerCounter: \"counters/stage-manager.json\",\n    userByRole: (role, id)=>`users/${role}/${id}.json`,\n    registrationStageManagerFile: (name, id)=>`registrations/stage-managers/${name}-${id}.json`,\n    registrationArtistFile: (name, id)=>`registrations/artists/${name}-${id}.json`,\n    eventFile: (eventId)=>`events/${eventId}.json`,\n    artistFile: (artistId)=>`artists/${artistId}.json`,\n    artistsIndex: (eventId)=>`events/${eventId}/artists/index.json`,\n    stageManagerFile: (stageManagerId)=>`stage-managers/${stageManagerId}.json`\n};\nclass GCSManager {\n    constructor(bucketName = \"artist-event-storage\"){\n        this.bucketName = bucketName;\n    }\n    /**\n\t * Upload a file to Google Cloud Storage\n\t */ async uploadFile(file, folder, artistId) {\n        try {\n            // Generate unique filename\n            const timestamp = Date.now();\n            const randomId = Math.random().toString(36).substring(2, 9);\n            const extension = file.name.split(\".\").pop();\n            const filename = `${timestamp}_${randomId}.${extension}`;\n            // Convert File to Buffer\n            const arrayBuffer = await file.arrayBuffer();\n            const buffer = Buffer.from(arrayBuffer);\n            // Upload to Google Cloud Storage\n            const result = await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uploadFile(buffer, filename, `${folder}/${artistId}`, file.type);\n            return {\n                url: result.url,\n                filename: result.filename,\n                size: file.size,\n                contentType: file.type\n            };\n        } catch (error) {\n            console.error(\"Error uploading file to Google Cloud Storage:\", error);\n            throw new Error(\"Failed to upload file to Google Cloud Storage\");\n        }\n    }\n    /**\n\t * Upload multiple files\n\t */ async uploadFiles(files, folder, artistId) {\n        const uploadPromises = files.map((file)=>this.uploadFile(file, folder, artistId));\n        return Promise.all(uploadPromises);\n    }\n    /**\n\t * Delete a file from Google Cloud Storage\n\t */ async deleteFile(filename) {\n        try {\n            await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deleteFile(filename);\n        } catch (error) {\n            console.error(\"Error deleting file from Google Cloud Storage:\", error);\n            throw new Error(\"Failed to delete file from Google Cloud Storage\");\n        }\n    }\n    /**\n\t * Get a signed URL for file access\n\t */ async getSignedUrl(filename, expiresIn = 3600) {\n        try {\n            return await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getSignedUrl(filename, expiresIn);\n        } catch (error) {\n            console.error(\"Error generating signed URL from Google Cloud Storage:\", error);\n            throw new Error(\"Failed to generate signed URL from Google Cloud Storage\");\n        }\n    }\n}\n// Export a default instance\nconst gcsManager = new GCSManager();\nasync function readJsonFile(path, defaultValue = null) {\n    try {\n        const data = await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].readJSON(path);\n        return data !== null ? data : defaultValue;\n    } catch (error) {\n        console.error(\"Error reading JSON file from Google Cloud Storage:\", error);\n        return defaultValue;\n    }\n}\n/**\n * Write JSON file to Google Cloud Storage\n */ async function writeJsonFile(path, data) {\n    try {\n        await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].saveJSON(data, path);\n    } catch (error) {\n        console.error(\"Error writing JSON file to Google Cloud Storage:\", error);\n        throw new Error(\"Failed to write JSON file to Google Cloud Storage\");\n    }\n}\n/**\n * Read all JSON files from a directory in Google Cloud Storage\n */ async function readJsonDirectory(dirPath) {\n    try {\n        const files = await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].listFiles(dirPath);\n        const jsonFiles = files.filter((file)=>file.endsWith(\".json\"));\n        const results = [];\n        for (const file of jsonFiles){\n            const data = await _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__[\"default\"].readJSON(file);\n            if (data !== null) {\n                results.push(data);\n            }\n        }\n        return results;\n    } catch (error) {\n        console.error(\"Error reading JSON directory from Google Cloud Storage:\", error);\n        return [];\n    }\n}\n/**\n * Upsert (insert or update) an item in an array file\n */ async function upsertArrayFile(path, item, matchField = \"id\") {\n    try {\n        const existingData = await readJsonFile(path, []);\n        const array = existingData || [];\n        const existingIndex = array.findIndex((existing)=>existing[matchField] === item[matchField]);\n        if (existingIndex >= 0) {\n            // Update existing item\n            array[existingIndex] = {\n                ...array[existingIndex],\n                ...item\n            };\n        } else {\n            // Add new item\n            array.push(item);\n        }\n        await writeJsonFile(path, array);\n    } catch (error) {\n        console.error(\"Error upserting array file:\", error);\n        throw new Error(\"Failed to upsert array file\");\n    }\n}\n/**\n * Delete an item from an array file\n */ async function deleteFromArrayFile(path, itemId, matchField = \"id\") {\n    try {\n        const existingData = await readJsonFile(path, []);\n        const array = existingData || [];\n        const filteredArray = array.filter((item)=>item[matchField] !== itemId);\n        await writeJsonFile(path, filteredArray);\n    } catch (error) {\n        console.error(\"Error deleting from array file:\", error);\n        throw new Error(\"Failed to delete from array file\");\n    }\n}\n// Helper function to organize artist data in GCS-like structure\nfunction createArtistDataStructure(artistData) {\n    const artistId = artistData.id;\n    const eventId = artistData.eventId;\n    return {\n        // Main artist data\n        profile: {\n            path: `artists/${artistId}/profile.json`,\n            data: {\n                id: artistData.id,\n                artistName: artistData.artistName,\n                realName: artistData.realName,\n                email: artistData.email,\n                phone: artistData.phone,\n                style: artistData.style,\n                performanceType: artistData.performanceType,\n                performanceDuration: artistData.performanceDuration,\n                biography: artistData.biography,\n                createdAt: artistData.createdAt,\n                status: artistData.status\n            }\n        },\n        // Technical specifications\n        technical: {\n            path: `artists/${artistId}/technical.json`,\n            data: {\n                costumeColor: artistData.costumeColor,\n                customCostumeColor: artistData.customCostumeColor,\n                lightColorSingle: artistData.lightColorSingle,\n                lightColorTwo: artistData.lightColorTwo,\n                lightColorThree: artistData.lightColorThree,\n                lightRequests: artistData.lightRequests,\n                stagePositionStart: artistData.stagePositionStart,\n                stagePositionEnd: artistData.stagePositionEnd,\n                customStagePosition: artistData.customStagePosition\n            }\n        },\n        // Social media and links\n        social: {\n            path: `artists/${artistId}/social.json`,\n            data: {\n                socialMedia: artistData.socialMedia,\n                showLink: artistData.showLink\n            }\n        },\n        // Notes and communications\n        notes: {\n            path: `artists/${artistId}/notes.json`,\n            data: {\n                mcNotes: artistData.mcNotes,\n                stageManagerNotes: artistData.stageManagerNotes,\n                specialRequirements: artistData.specialRequirements\n            }\n        },\n        // Music tracks metadata\n        music: {\n            path: `artists/${artistId}/music.json`,\n            data: {\n                tracks: artistData.musicTracks?.map((track)=>({\n                        song_title: track.song_title,\n                        duration: track.duration,\n                        notes: track.notes,\n                        is_main_track: track.is_main_track,\n                        tempo: track.tempo,\n                        file_path: `artists/${artistId}/music/${track.song_title.replace(/[^a-zA-Z0-9]/g, \"_\")}.mp3`\n                    })) || []\n            }\n        },\n        // Gallery metadata\n        gallery: {\n            path: `artists/${artistId}/gallery.json`,\n            data: {\n                files: artistData.galleryFiles?.map((file, index)=>({\n                        name: file.name,\n                        type: file.type,\n                        file_path: `artists/${artistId}/gallery/${index}_${file.name}`\n                    })) || []\n            }\n        },\n        // Event association\n        event: {\n            path: `events/${eventId}/artists/${artistId}.json`,\n            data: {\n                artistId: artistData.id,\n                artistName: artistData.artistName,\n                eventId: artistData.eventId,\n                eventName: artistData.eventName,\n                status: artistData.status,\n                registrationDate: artistData.createdAt\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRTFFLElBQ3hCLENBQUM3QixNQUFXd0csUUFBbUI7d0JBQzlCckgsTUFBTWEsS0FBS2IsSUFBSTt3QkFDZmdDLE1BQU1uQixLQUFLbUIsSUFBSTt3QkFDZmlGLFdBQVcsQ0FBQyxRQUFRLEVBQUU1RyxTQUFTLFNBQVMsRUFBRWdILE1BQU0sQ0FBQyxFQUFFeEcsS0FBS2IsSUFBSSxDQUFDLENBQUM7b0JBQy9ELE9BQ0ksRUFBRTtZQUNUO1FBQ0Q7UUFDQSxvQkFBb0I7UUFDcEJzSCxPQUFPO1lBQ05wRSxNQUFNLENBQUMsT0FBTyxFQUFFL0MsUUFBUSxTQUFTLEVBQUVFLFNBQVMsS0FBSyxDQUFDO1lBQ2xEK0MsTUFBTTtnQkFDTC9DLFVBQVV1RSxXQUFXOUUsRUFBRTtnQkFDdkJnRixZQUFZRixXQUFXRSxVQUFVO2dCQUNqQzNFLFNBQVN5RSxXQUFXekUsT0FBTztnQkFDM0JvSCxXQUFXM0MsV0FBVzJDLFNBQVM7Z0JBQy9CaEMsUUFBUVgsV0FBV1csTUFBTTtnQkFDekJpQyxrQkFBa0I1QyxXQUFXVSxTQUFTO1lBQ3ZDO1FBQ0Q7SUFDRDtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9nY3MudHM/YjFhMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHb29nbGUgQ2xvdWQgU3RvcmFnZSB1dGlsaXR5IGZ1bmN0aW9uc1xuLy8gTm90ZTogVGhpcyBpcyBhIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gZm9yIGRlbW9uc3RyYXRpb25cbi8vIEluIHByb2R1Y3Rpb24sIHlvdSB3b3VsZCB1c2UgdGhlIGFjdHVhbCBHb29nbGUgQ2xvdWQgU3RvcmFnZSBTREtcblxuaW1wb3J0IEdDU1NlcnZpY2UgZnJvbSBcIi4vZ29vZ2xlLWNsb3VkLXN0b3JhZ2VcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGaWxlVXBsb2FkUmVzdWx0IHtcblx0dXJsOiBzdHJpbmc7XG5cdGZpbGVuYW1lOiBzdHJpbmc7XG5cdHNpemU6IG51bWJlcjtcblx0Y29udGVudFR5cGU6IHN0cmluZztcbn1cblxuLy8gRmlsZSBwYXRocyBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgcGF0aHMgPSB7XG5cdHVzZXJzSW5kZXg6IFwidXNlcnMvaW5kZXguanNvblwiLFxuXHRyZWdpc3RyYXRpb25TdGFnZU1hbmFnZXJEaXI6IFwicmVnaXN0cmF0aW9ucy9zdGFnZS1tYW5hZ2Vyc1wiLFxuXHRyZWdpc3RyYXRpb25BcnRpc3REaXI6IFwicmVnaXN0cmF0aW9ucy9hcnRpc3RzXCIsXG5cdGV2ZW50c0luZGV4OiBcImV2ZW50cy9pbmRleC5qc29uXCIsXG5cdHN0YWdlTWFuYWdlcnNJbmRleDogXCJzdGFnZS1tYW5hZ2Vycy9pbmRleC5qc29uXCIsXG5cdHN1cGVyQWRtaW5zSW5kZXg6IFwic3VwZXItYWRtaW5zL2luZGV4Lmpzb25cIixcblx0Z2xvYmFsQXJ0aXN0c0luZGV4OiBcImFydGlzdHMvaW5kZXguanNvblwiLFxuXHRzdGFnZU1hbmFnZXJDb3VudGVyOiBcImNvdW50ZXJzL3N0YWdlLW1hbmFnZXIuanNvblwiLFxuXHR1c2VyQnlSb2xlOiAocm9sZTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PiBgdXNlcnMvJHtyb2xlfS8ke2lkfS5qc29uYCxcblx0cmVnaXN0cmF0aW9uU3RhZ2VNYW5hZ2VyRmlsZTogKG5hbWU6IHN0cmluZywgaWQ6IG51bWJlcikgPT5cblx0XHRgcmVnaXN0cmF0aW9ucy9zdGFnZS1tYW5hZ2Vycy8ke25hbWV9LSR7aWR9Lmpzb25gLFxuXHRyZWdpc3RyYXRpb25BcnRpc3RGaWxlOiAobmFtZTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PlxuXHRcdGByZWdpc3RyYXRpb25zL2FydGlzdHMvJHtuYW1lfS0ke2lkfS5qc29uYCxcblx0ZXZlbnRGaWxlOiAoZXZlbnRJZDogc3RyaW5nKSA9PiBgZXZlbnRzLyR7ZXZlbnRJZH0uanNvbmAsXG5cdGFydGlzdEZpbGU6IChhcnRpc3RJZDogc3RyaW5nKSA9PiBgYXJ0aXN0cy8ke2FydGlzdElkfS5qc29uYCxcblx0YXJ0aXN0c0luZGV4OiAoZXZlbnRJZDogc3RyaW5nKSA9PiBgZXZlbnRzLyR7ZXZlbnRJZH0vYXJ0aXN0cy9pbmRleC5qc29uYCxcblx0c3RhZ2VNYW5hZ2VyRmlsZTogKHN0YWdlTWFuYWdlcklkOiBzdHJpbmcpID0+XG5cdFx0YHN0YWdlLW1hbmFnZXJzLyR7c3RhZ2VNYW5hZ2VySWR9Lmpzb25gLFxufTtcblxuZXhwb3J0IGNsYXNzIEdDU01hbmFnZXIge1xuXHRwcml2YXRlIGJ1Y2tldE5hbWU6IHN0cmluZztcblxuXHRjb25zdHJ1Y3RvcihidWNrZXROYW1lOiBzdHJpbmcgPSBcImFydGlzdC1ldmVudC1zdG9yYWdlXCIpIHtcblx0XHR0aGlzLmJ1Y2tldE5hbWUgPSBidWNrZXROYW1lO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwbG9hZCBhIGZpbGUgdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2Vcblx0ICovXG5cdGFzeW5jIHVwbG9hZEZpbGUoXG5cdFx0ZmlsZTogRmlsZSxcblx0XHRmb2xkZXI6IHN0cmluZyxcblx0XHRhcnRpc3RJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8RmlsZVVwbG9hZFJlc3VsdD4ge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWVcblx0XHRcdGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdFx0XHRjb25zdCByYW5kb21JZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KTtcblx0XHRcdGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUubmFtZS5zcGxpdChcIi5cIikucG9wKCk7XG5cdFx0XHRjb25zdCBmaWxlbmFtZSA9IGAke3RpbWVzdGFtcH1fJHtyYW5kb21JZH0uJHtleHRlbnNpb259YDtcblxuXHRcdFx0Ly8gQ29udmVydCBGaWxlIHRvIEJ1ZmZlclxuXHRcdFx0Y29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XG5cdFx0XHRjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XG5cblx0XHRcdC8vIFVwbG9hZCB0byBHb29nbGUgQ2xvdWQgU3RvcmFnZVxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgR0NTU2VydmljZS51cGxvYWRGaWxlKFxuXHRcdFx0XHRidWZmZXIsXG5cdFx0XHRcdGZpbGVuYW1lLFxuXHRcdFx0XHRgJHtmb2xkZXJ9LyR7YXJ0aXN0SWR9YCxcblx0XHRcdFx0ZmlsZS50eXBlXG5cdFx0XHQpO1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1cmw6IHJlc3VsdC51cmwsXG5cdFx0XHRcdGZpbGVuYW1lOiByZXN1bHQuZmlsZW5hbWUsXG5cdFx0XHRcdHNpemU6IGZpbGUuc2l6ZSxcblx0XHRcdFx0Y29udGVudFR5cGU6IGZpbGUudHlwZSxcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFwiRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2U6XCIsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHQpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlIHRvIEdvb2dsZSBDbG91ZCBTdG9yYWdlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVcGxvYWQgbXVsdGlwbGUgZmlsZXNcblx0ICovXG5cdGFzeW5jIHVwbG9hZEZpbGVzKFxuXHRcdGZpbGVzOiBGaWxlW10sXG5cdFx0Zm9sZGVyOiBzdHJpbmcsXG5cdFx0YXJ0aXN0SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPEZpbGVVcGxvYWRSZXN1bHRbXT4ge1xuXHRcdGNvbnN0IHVwbG9hZFByb21pc2VzID0gZmlsZXMubWFwKChmaWxlKSA9PlxuXHRcdFx0dGhpcy51cGxvYWRGaWxlKGZpbGUsIGZvbGRlciwgYXJ0aXN0SWQpXG5cdFx0KTtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwodXBsb2FkUHJvbWlzZXMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGV0ZSBhIGZpbGUgZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZVxuXHQgKi9cblx0YXN5bmMgZGVsZXRlRmlsZShmaWxlbmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IEdDU1NlcnZpY2UuZGVsZXRlRmlsZShmaWxlbmFtZSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFwiRXJyb3IgZGVsZXRpbmcgZmlsZSBmcm9tIEdvb2dsZSBDbG91ZCBTdG9yYWdlOlwiLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0KTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWxldGUgZmlsZSBmcm9tIEdvb2dsZSBDbG91ZCBTdG9yYWdlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgYSBzaWduZWQgVVJMIGZvciBmaWxlIGFjY2Vzc1xuXHQgKi9cblx0YXN5bmMgZ2V0U2lnbmVkVXJsKFxuXHRcdGZpbGVuYW1lOiBzdHJpbmcsXG5cdFx0ZXhwaXJlc0luOiBudW1iZXIgPSAzNjAwXG5cdCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBHQ1NTZXJ2aWNlLmdldFNpZ25lZFVybChmaWxlbmFtZSwgZXhwaXJlc0luKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XCJFcnJvciBnZW5lcmF0aW5nIHNpZ25lZCBVUkwgZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZTpcIixcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFwiRmFpbGVkIHRvIGdlbmVyYXRlIHNpZ25lZCBVUkwgZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZVwiXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxufVxuXG4vLyBFeHBvcnQgYSBkZWZhdWx0IGluc3RhbmNlXG5leHBvcnQgY29uc3QgZ2NzTWFuYWdlciA9IG5ldyBHQ1NNYW5hZ2VyKCk7XG5cbi8qKlxuICogUmVhZCBKU09OIGZpbGUgZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZVxuICovXG4vLyBPdmVybG9hZHMgZW5zdXJlIG5vbi1udWxsYWJsZSByZXR1cm4gd2hlbiBhIG5vbi1udWxsIGRlZmF1bHQgaXMgcHJvdmlkZWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkSnNvbkZpbGU8VD4ocGF0aDogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEpzb25GaWxlPFQ+KHBhdGg6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBUKTogUHJvbWlzZTxUPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkSnNvbkZpbGU8VD4oXG5cdHBhdGg6IHN0cmluZyxcblx0ZGVmYXVsdFZhbHVlOiBUIHwgbnVsbCA9IG51bGxcbik6IFByb21pc2U8VCB8IG51bGw+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgR0NTU2VydmljZS5yZWFkSlNPTihwYXRoKTtcblx0XHRyZXR1cm4gZGF0YSAhPT0gbnVsbCA/IChkYXRhIGFzIFQpIDogKGRlZmF1bHRWYWx1ZSBhcyBUIHwgbnVsbCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFwiRXJyb3IgcmVhZGluZyBKU09OIGZpbGUgZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZTpcIixcblx0XHRcdGVycm9yXG5cdFx0KTtcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlIGFzIFQgfCBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogV3JpdGUgSlNPTiBmaWxlIHRvIEdvb2dsZSBDbG91ZCBTdG9yYWdlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZUpzb25GaWxlKHBhdGg6IHN0cmluZywgZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG5cdHRyeSB7XG5cdFx0YXdhaXQgR0NTU2VydmljZS5zYXZlSlNPTihkYXRhLCBwYXRoKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XCJFcnJvciB3cml0aW5nIEpTT04gZmlsZSB0byBHb29nbGUgQ2xvdWQgU3RvcmFnZTpcIixcblx0XHRcdGVycm9yXG5cdFx0KTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gd3JpdGUgSlNPTiBmaWxlIHRvIEdvb2dsZSBDbG91ZCBTdG9yYWdlXCIpO1xuXHR9XG59XG5cbi8qKlxuICogUmVhZCBhbGwgSlNPTiBmaWxlcyBmcm9tIGEgZGlyZWN0b3J5IGluIEdvb2dsZSBDbG91ZCBTdG9yYWdlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkSnNvbkRpcmVjdG9yeTxUPihkaXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPFRbXT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGZpbGVzID0gYXdhaXQgR0NTU2VydmljZS5saXN0RmlsZXMoZGlyUGF0aCk7XG5cdFx0Y29uc3QganNvbkZpbGVzID0gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiBmaWxlLmVuZHNXaXRoKFwiLmpzb25cIikpO1xuXG5cdFx0Y29uc3QgcmVzdWx0czogVFtdID0gW107XG5cdFx0Zm9yIChjb25zdCBmaWxlIG9mIGpzb25GaWxlcykge1xuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IEdDU1NlcnZpY2UucmVhZEpTT04oZmlsZSk7XG5cdFx0XHRpZiAoZGF0YSAhPT0gbnVsbCkge1xuXHRcdFx0XHRyZXN1bHRzLnB1c2goZGF0YSBhcyBUKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XCJFcnJvciByZWFkaW5nIEpTT04gZGlyZWN0b3J5IGZyb20gR29vZ2xlIENsb3VkIFN0b3JhZ2U6XCIsXG5cdFx0XHRlcnJvclxuXHRcdCk7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG59XG5cbi8qKlxuICogVXBzZXJ0IChpbnNlcnQgb3IgdXBkYXRlKSBhbiBpdGVtIGluIGFuIGFycmF5IGZpbGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydEFycmF5RmlsZTxUIGV4dGVuZHMgeyBpZDogc3RyaW5nIH0+KFxuXHRwYXRoOiBzdHJpbmcsXG5cdGl0ZW06IFQsXG5cdG1hdGNoRmllbGQ6IGtleW9mIFQgPSBcImlkXCIgYXMga2V5b2YgVFxuKTogUHJvbWlzZTx2b2lkPiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgZXhpc3RpbmdEYXRhID0gYXdhaXQgcmVhZEpzb25GaWxlPFRbXT4ocGF0aCwgW10pO1xuXHRcdGNvbnN0IGFycmF5ID0gZXhpc3RpbmdEYXRhIHx8IFtdO1xuXG5cdFx0Y29uc3QgZXhpc3RpbmdJbmRleCA9IGFycmF5LmZpbmRJbmRleChcblx0XHRcdChleGlzdGluZykgPT4gZXhpc3RpbmdbbWF0Y2hGaWVsZF0gPT09IGl0ZW1bbWF0Y2hGaWVsZF1cblx0XHQpO1xuXG5cdFx0aWYgKGV4aXN0aW5nSW5kZXggPj0gMCkge1xuXHRcdFx0Ly8gVXBkYXRlIGV4aXN0aW5nIGl0ZW1cblx0XHRcdGFycmF5W2V4aXN0aW5nSW5kZXhdID0geyAuLi5hcnJheVtleGlzdGluZ0luZGV4XSwgLi4uaXRlbSB9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBBZGQgbmV3IGl0ZW1cblx0XHRcdGFycmF5LnB1c2goaXRlbSk7XG5cdFx0fVxuXG5cdFx0YXdhaXQgd3JpdGVKc29uRmlsZShwYXRoLCBhcnJheSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHVwc2VydGluZyBhcnJheSBmaWxlOlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwc2VydCBhcnJheSBmaWxlXCIpO1xuXHR9XG59XG5cbi8qKlxuICogRGVsZXRlIGFuIGl0ZW0gZnJvbSBhbiBhcnJheSBmaWxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGcm9tQXJyYXlGaWxlPFQgZXh0ZW5kcyB7IGlkOiBzdHJpbmcgfT4oXG5cdHBhdGg6IHN0cmluZyxcblx0aXRlbUlkOiBzdHJpbmcsXG5cdG1hdGNoRmllbGQ6IGtleW9mIFQgPSBcImlkXCIgYXMga2V5b2YgVFxuKTogUHJvbWlzZTx2b2lkPiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgZXhpc3RpbmdEYXRhID0gYXdhaXQgcmVhZEpzb25GaWxlPFRbXT4ocGF0aCwgW10pO1xuXHRcdGNvbnN0IGFycmF5ID0gZXhpc3RpbmdEYXRhIHx8IFtdO1xuXG5cdFx0Y29uc3QgZmlsdGVyZWRBcnJheSA9IGFycmF5LmZpbHRlcihcblx0XHRcdChpdGVtKSA9PiBpdGVtW21hdGNoRmllbGRdICE9PSBpdGVtSWRcblx0XHQpO1xuXG5cdFx0YXdhaXQgd3JpdGVKc29uRmlsZShwYXRoLCBmaWx0ZXJlZEFycmF5KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgZnJvbSBhcnJheSBmaWxlOlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBmcm9tIGFycmF5IGZpbGVcIik7XG5cdH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIG9yZ2FuaXplIGFydGlzdCBkYXRhIGluIEdDUy1saWtlIHN0cnVjdHVyZVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFydGlzdERhdGFTdHJ1Y3R1cmUoYXJ0aXN0RGF0YTogYW55KSB7XG5cdGNvbnN0IGFydGlzdElkID0gYXJ0aXN0RGF0YS5pZDtcblx0Y29uc3QgZXZlbnRJZCA9IGFydGlzdERhdGEuZXZlbnRJZDtcblxuXHRyZXR1cm4ge1xuXHRcdC8vIE1haW4gYXJ0aXN0IGRhdGFcblx0XHRwcm9maWxlOiB7XG5cdFx0XHRwYXRoOiBgYXJ0aXN0cy8ke2FydGlzdElkfS9wcm9maWxlLmpzb25gLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRpZDogYXJ0aXN0RGF0YS5pZCxcblx0XHRcdFx0YXJ0aXN0TmFtZTogYXJ0aXN0RGF0YS5hcnRpc3ROYW1lLFxuXHRcdFx0XHRyZWFsTmFtZTogYXJ0aXN0RGF0YS5yZWFsTmFtZSxcblx0XHRcdFx0ZW1haWw6IGFydGlzdERhdGEuZW1haWwsXG5cdFx0XHRcdHBob25lOiBhcnRpc3REYXRhLnBob25lLFxuXHRcdFx0XHRzdHlsZTogYXJ0aXN0RGF0YS5zdHlsZSxcblx0XHRcdFx0cGVyZm9ybWFuY2VUeXBlOiBhcnRpc3REYXRhLnBlcmZvcm1hbmNlVHlwZSxcblx0XHRcdFx0cGVyZm9ybWFuY2VEdXJhdGlvbjogYXJ0aXN0RGF0YS5wZXJmb3JtYW5jZUR1cmF0aW9uLFxuXHRcdFx0XHRiaW9ncmFwaHk6IGFydGlzdERhdGEuYmlvZ3JhcGh5LFxuXHRcdFx0XHRjcmVhdGVkQXQ6IGFydGlzdERhdGEuY3JlYXRlZEF0LFxuXHRcdFx0XHRzdGF0dXM6IGFydGlzdERhdGEuc3RhdHVzLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdC8vIFRlY2huaWNhbCBzcGVjaWZpY2F0aW9uc1xuXHRcdHRlY2huaWNhbDoge1xuXHRcdFx0cGF0aDogYGFydGlzdHMvJHthcnRpc3RJZH0vdGVjaG5pY2FsLmpzb25gLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRjb3N0dW1lQ29sb3I6IGFydGlzdERhdGEuY29zdHVtZUNvbG9yLFxuXHRcdFx0XHRjdXN0b21Db3N0dW1lQ29sb3I6IGFydGlzdERhdGEuY3VzdG9tQ29zdHVtZUNvbG9yLFxuXHRcdFx0XHRsaWdodENvbG9yU2luZ2xlOiBhcnRpc3REYXRhLmxpZ2h0Q29sb3JTaW5nbGUsXG5cdFx0XHRcdGxpZ2h0Q29sb3JUd286IGFydGlzdERhdGEubGlnaHRDb2xvclR3byxcblx0XHRcdFx0bGlnaHRDb2xvclRocmVlOiBhcnRpc3REYXRhLmxpZ2h0Q29sb3JUaHJlZSxcblx0XHRcdFx0bGlnaHRSZXF1ZXN0czogYXJ0aXN0RGF0YS5saWdodFJlcXVlc3RzLFxuXHRcdFx0XHRzdGFnZVBvc2l0aW9uU3RhcnQ6IGFydGlzdERhdGEuc3RhZ2VQb3NpdGlvblN0YXJ0LFxuXHRcdFx0XHRzdGFnZVBvc2l0aW9uRW5kOiBhcnRpc3REYXRhLnN0YWdlUG9zaXRpb25FbmQsXG5cdFx0XHRcdGN1c3RvbVN0YWdlUG9zaXRpb246IGFydGlzdERhdGEuY3VzdG9tU3RhZ2VQb3NpdGlvbixcblx0XHRcdH0sXG5cdFx0fSxcblx0XHQvLyBTb2NpYWwgbWVkaWEgYW5kIGxpbmtzXG5cdFx0c29jaWFsOiB7XG5cdFx0XHRwYXRoOiBgYXJ0aXN0cy8ke2FydGlzdElkfS9zb2NpYWwuanNvbmAsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHNvY2lhbE1lZGlhOiBhcnRpc3REYXRhLnNvY2lhbE1lZGlhLFxuXHRcdFx0XHRzaG93TGluazogYXJ0aXN0RGF0YS5zaG93TGluayxcblx0XHRcdH0sXG5cdFx0fSxcblx0XHQvLyBOb3RlcyBhbmQgY29tbXVuaWNhdGlvbnNcblx0XHRub3Rlczoge1xuXHRcdFx0cGF0aDogYGFydGlzdHMvJHthcnRpc3RJZH0vbm90ZXMuanNvbmAsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdG1jTm90ZXM6IGFydGlzdERhdGEubWNOb3Rlcyxcblx0XHRcdFx0c3RhZ2VNYW5hZ2VyTm90ZXM6IGFydGlzdERhdGEuc3RhZ2VNYW5hZ2VyTm90ZXMsXG5cdFx0XHRcdHNwZWNpYWxSZXF1aXJlbWVudHM6IGFydGlzdERhdGEuc3BlY2lhbFJlcXVpcmVtZW50cyxcblx0XHRcdH0sXG5cdFx0fSxcblx0XHQvLyBNdXNpYyB0cmFja3MgbWV0YWRhdGFcblx0XHRtdXNpYzoge1xuXHRcdFx0cGF0aDogYGFydGlzdHMvJHthcnRpc3RJZH0vbXVzaWMuanNvbmAsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHRyYWNrczpcblx0XHRcdFx0XHRhcnRpc3REYXRhLm11c2ljVHJhY2tzPy5tYXAoKHRyYWNrOiBhbnkpID0+ICh7XG5cdFx0XHRcdFx0XHRzb25nX3RpdGxlOiB0cmFjay5zb25nX3RpdGxlLFxuXHRcdFx0XHRcdFx0ZHVyYXRpb246IHRyYWNrLmR1cmF0aW9uLFxuXHRcdFx0XHRcdFx0bm90ZXM6IHRyYWNrLm5vdGVzLFxuXHRcdFx0XHRcdFx0aXNfbWFpbl90cmFjazogdHJhY2suaXNfbWFpbl90cmFjayxcblx0XHRcdFx0XHRcdHRlbXBvOiB0cmFjay50ZW1wbyxcblx0XHRcdFx0XHRcdGZpbGVfcGF0aDogYGFydGlzdHMvJHthcnRpc3RJZH0vbXVzaWMvJHt0cmFjay5zb25nX3RpdGxlLnJlcGxhY2UoXG5cdFx0XHRcdFx0XHRcdC9bXmEtekEtWjAtOV0vZyxcblx0XHRcdFx0XHRcdFx0XCJfXCJcblx0XHRcdFx0XHRcdCl9Lm1wM2AsXG5cdFx0XHRcdFx0fSkpIHx8IFtdLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdC8vIEdhbGxlcnkgbWV0YWRhdGFcblx0XHRnYWxsZXJ5OiB7XG5cdFx0XHRwYXRoOiBgYXJ0aXN0cy8ke2FydGlzdElkfS9nYWxsZXJ5Lmpzb25gLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRmaWxlczpcblx0XHRcdFx0XHRhcnRpc3REYXRhLmdhbGxlcnlGaWxlcz8ubWFwKFxuXHRcdFx0XHRcdFx0KGZpbGU6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcblx0XHRcdFx0XHRcdFx0bmFtZTogZmlsZS5uYW1lLFxuXHRcdFx0XHRcdFx0XHR0eXBlOiBmaWxlLnR5cGUsXG5cdFx0XHRcdFx0XHRcdGZpbGVfcGF0aDogYGFydGlzdHMvJHthcnRpc3RJZH0vZ2FsbGVyeS8ke2luZGV4fV8ke2ZpbGUubmFtZX1gLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpIHx8IFtdLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdC8vIEV2ZW50IGFzc29jaWF0aW9uXG5cdFx0ZXZlbnQ6IHtcblx0XHRcdHBhdGg6IGBldmVudHMvJHtldmVudElkfS9hcnRpc3RzLyR7YXJ0aXN0SWR9Lmpzb25gLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRhcnRpc3RJZDogYXJ0aXN0RGF0YS5pZCxcblx0XHRcdFx0YXJ0aXN0TmFtZTogYXJ0aXN0RGF0YS5hcnRpc3ROYW1lLFxuXHRcdFx0XHRldmVudElkOiBhcnRpc3REYXRhLmV2ZW50SWQsXG5cdFx0XHRcdGV2ZW50TmFtZTogYXJ0aXN0RGF0YS5ldmVudE5hbWUsXG5cdFx0XHRcdHN0YXR1czogYXJ0aXN0RGF0YS5zdGF0dXMsXG5cdFx0XHRcdHJlZ2lzdHJhdGlvbkRhdGU6IGFydGlzdERhdGEuY3JlYXRlZEF0LFxuXHRcdFx0fSxcblx0XHR9LFxuXHR9O1xufVxuIl0sIm5hbWVzIjpbIkdDU1NlcnZpY2UiLCJwYXRocyIsInVzZXJzSW5kZXgiLCJyZWdpc3RyYXRpb25TdGFnZU1hbmFnZXJEaXIiLCJyZWdpc3RyYXRpb25BcnRpc3REaXIiLCJldmVudHNJbmRleCIsInN0YWdlTWFuYWdlcnNJbmRleCIsInN1cGVyQWRtaW5zSW5kZXgiLCJnbG9iYWxBcnRpc3RzSW5kZXgiLCJzdGFnZU1hbmFnZXJDb3VudGVyIiwidXNlckJ5Um9sZSIsInJvbGUiLCJpZCIsInJlZ2lzdHJhdGlvblN0YWdlTWFuYWdlckZpbGUiLCJuYW1lIiwicmVnaXN0cmF0aW9uQXJ0aXN0RmlsZSIsImV2ZW50RmlsZSIsImV2ZW50SWQiLCJhcnRpc3RGaWxlIiwiYXJ0aXN0SWQiLCJhcnRpc3RzSW5kZXgiLCJzdGFnZU1hbmFnZXJGaWxlIiwic3RhZ2VNYW5hZ2VySWQiLCJHQ1NNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJidWNrZXROYW1lIiwidXBsb2FkRmlsZSIsImZpbGUiLCJmb2xkZXIiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicmFuZG9tSWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJleHRlbnNpb24iLCJzcGxpdCIsInBvcCIsImZpbGVuYW1lIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwicmVzdWx0IiwidHlwZSIsInVybCIsInNpemUiLCJjb250ZW50VHlwZSIsImVycm9yIiwiY29uc29sZSIsIkVycm9yIiwidXBsb2FkRmlsZXMiLCJmaWxlcyIsInVwbG9hZFByb21pc2VzIiwibWFwIiwiUHJvbWlzZSIsImFsbCIsImRlbGV0ZUZpbGUiLCJnZXRTaWduZWRVcmwiLCJleHBpcmVzSW4iLCJnY3NNYW5hZ2VyIiwicmVhZEpzb25GaWxlIiwicGF0aCIsImRlZmF1bHRWYWx1ZSIsImRhdGEiLCJyZWFkSlNPTiIsIndyaXRlSnNvbkZpbGUiLCJzYXZlSlNPTiIsInJlYWRKc29uRGlyZWN0b3J5IiwiZGlyUGF0aCIsImxpc3RGaWxlcyIsImpzb25GaWxlcyIsImZpbHRlciIsImVuZHNXaXRoIiwicmVzdWx0cyIsInB1c2giLCJ1cHNlcnRBcnJheUZpbGUiLCJpdGVtIiwibWF0Y2hGaWVsZCIsImV4aXN0aW5nRGF0YSIsImFycmF5IiwiZXhpc3RpbmdJbmRleCIsImZpbmRJbmRleCIsImV4aXN0aW5nIiwiZGVsZXRlRnJvbUFycmF5RmlsZSIsIml0ZW1JZCIsImZpbHRlcmVkQXJyYXkiLCJjcmVhdGVBcnRpc3REYXRhU3RydWN0dXJlIiwiYXJ0aXN0RGF0YSIsInByb2ZpbGUiLCJhcnRpc3ROYW1lIiwicmVhbE5hbWUiLCJlbWFpbCIsInBob25lIiwic3R5bGUiLCJwZXJmb3JtYW5jZVR5cGUiLCJwZXJmb3JtYW5jZUR1cmF0aW9uIiwiYmlvZ3JhcGh5IiwiY3JlYXRlZEF0Iiwic3RhdHVzIiwidGVjaG5pY2FsIiwiY29zdHVtZUNvbG9yIiwiY3VzdG9tQ29zdHVtZUNvbG9yIiwibGlnaHRDb2xvclNpbmdsZSIsImxpZ2h0Q29sb3JUd28iLCJsaWdodENvbG9yVGhyZWUiLCJsaWdodFJlcXVlc3RzIiwic3RhZ2VQb3NpdGlvblN0YXJ0Iiwic3RhZ2VQb3NpdGlvbkVuZCIsImN1c3RvbVN0YWdlUG9zaXRpb24iLCJzb2NpYWwiLCJzb2NpYWxNZWRpYSIsInNob3dMaW5rIiwibm90ZXMiLCJtY05vdGVzIiwic3RhZ2VNYW5hZ2VyTm90ZXMiLCJzcGVjaWFsUmVxdWlyZW1lbnRzIiwibXVzaWMiLCJ0cmFja3MiLCJtdXNpY1RyYWNrcyIsInRyYWNrIiwic29uZ190aXRsZSIsImR1cmF0aW9uIiwiaXNfbWFpbl90cmFjayIsInRlbXBvIiwiZmlsZV9wYXRoIiwicmVwbGFjZSIsImdhbGxlcnkiLCJnYWxsZXJ5RmlsZXMiLCJpbmRleCIsImV2ZW50IiwiZXZlbnROYW1lIiwicmVnaXN0cmF0aW9uRGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/gcs.ts\n");

/***/ }),

/***/ "(rsc)/./lib/google-cloud-storage.ts":
/*!*************************************!*\
  !*** ./lib/google-cloud-storage.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GCSService: () => (/* binding */ GCSService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google-cloud/storage */ \"(rsc)/./node_modules/@google-cloud/storage/build/esm/src/index.js\");\n\n// Initialize Google Cloud Storage\nlet storage = null;\nlet bucket = null;\nconst bucketName = process.env.GOOGLE_CLOUD_BUCKET_NAME || \"fame-event-data\";\n// Initialize Google Cloud Storage\ntry {\n    // Try different authentication methods\n    if (process.env.GOOGLE_CLOUD_PROJECT_ID) {\n        const storageConfig = {\n            projectId: process.env.GOOGLE_CLOUD_PROJECT_ID\n        };\n        // Use key file if provided\n        if (process.env.GOOGLE_CLOUD_KEY_FILE) {\n            storageConfig.keyFilename = process.env.GOOGLE_CLOUD_KEY_FILE;\n        } else if (process.env.GOOGLE_CLOUD_CREDENTIALS) {\n            storageConfig.credentials = JSON.parse(process.env.GOOGLE_CLOUD_CREDENTIALS);\n        }\n        storage = new _google_cloud_storage__WEBPACK_IMPORTED_MODULE_0__.Storage(storageConfig);\n        bucket = storage.bucket(bucketName);\n        console.log(`Google Cloud Storage initialized with bucket: ${bucketName}`);\n    } else {\n        console.error(\"Google Cloud Storage not configured: Missing GOOGLE_CLOUD_PROJECT_ID\");\n        throw new Error(\"Google Cloud Storage configuration missing\");\n    }\n} catch (error) {\n    console.error(\"Failed to initialize Google Cloud Storage:\", error);\n    throw error;\n}\nconst signedUrlCache = new Map();\nclass GCSService {\n    /**\n\t * Check if a URL is a blob URL that needs to be replaced\n\t */ static isBlobUrl(url) {\n        return typeof url === \"string\" && (url.startsWith(\"blob:\") || url === \"\" || !url);\n    }\n    /**\n\t * Clear expired entries from the signed URL cache\n\t */ static clearExpiredCache() {\n        const now = Date.now();\n        for (const [key, cached] of signedUrlCache.entries()){\n            if (cached.expiresAt <= now) {\n                signedUrlCache.delete(key);\n            }\n        }\n    }\n    /**\n\t * Check if a file exists in Google Cloud Storage\n\t */ static async fileExists(path) {\n        try {\n            if (!bucket) {\n                return false;\n            }\n            const gcsFile = bucket.file(path);\n            const [exists] = await gcsFile.exists();\n            return exists;\n        } catch (error) {\n            console.error(`Error checking if file exists: ${path}`, error);\n            return false;\n        }\n    }\n    /**\n\t * Upload a file to Google Cloud Storage with enhanced error handling\n\t */ static async uploadFile(file, filename, folder, contentType) {\n        try {\n            if (!bucket) {\n                throw new Error(\"Google Cloud Storage not initialized\");\n            }\n            const gcsPath = `${folder}/${filename}`;\n            const gcsFile = bucket.file(gcsPath);\n            await gcsFile.save(file, {\n                metadata: {\n                    contentType\n                },\n                public: false\n            });\n            // Generate initial signed URL with proper error handling\n            const signedUrl = await this.getSignedUrl(gcsPath, 24 * 60 * 60);\n            return {\n                url: signedUrl,\n                filename,\n                size: file.length,\n                contentType,\n                gcsPath\n            };\n        } catch (error) {\n            console.error(\"Error uploading file to Google Cloud Storage:\", error);\n            throw new Error(\"Failed to upload file to Google Cloud Storage\");\n        }\n    }\n    /**\n\t * Save JSON data to Google Cloud Storage\n\t */ static async saveJSON(data, path) {\n        try {\n            if (!bucket) {\n                throw new Error(\"Google Cloud Storage not initialized\");\n            }\n            const jsonData = JSON.stringify(data, null, 2);\n            const gcsFile = bucket.file(path);\n            await gcsFile.save(jsonData, {\n                metadata: {\n                    contentType: \"application/json\"\n                }\n            });\n            console.log(`JSON data saved to GCS: ${path}`);\n        } catch (error) {\n            console.error(\"Error saving JSON to Google Cloud Storage:\", error);\n            throw new Error(\"Failed to save data to Google Cloud Storage\");\n        }\n    }\n    /**\n\t * Read JSON data from Google Cloud Storage\n\t */ static async readJSON(path) {\n        try {\n            if (!bucket) {\n                throw new Error(\"Google Cloud Storage not initialized\");\n            }\n            const gcsFile = bucket.file(path);\n            const [exists] = await gcsFile.exists();\n            if (!exists) {\n                console.log(`File not found in GCS: ${path}`);\n                return null;\n            }\n            const [contents] = await gcsFile.download();\n            const data = JSON.parse(contents.toString());\n            console.log(`JSON data read from GCS: ${path}`);\n            return data;\n        } catch (error) {\n            console.error(\"Error reading JSON from Google Cloud Storage:\", error);\n            return null;\n        }\n    }\n    /**\n\t * List files in a folder\n\t */ static async listFiles(prefix) {\n        try {\n            if (!bucket) {\n                throw new Error(\"Google Cloud Storage not initialized\");\n            }\n            const [files] = await bucket.getFiles({\n                prefix\n            });\n            const fileNames = files.map((file)=>file.name);\n            console.log(`Listed ${fileNames.length} files from GCS with prefix: ${prefix}`);\n            return fileNames;\n        } catch (error) {\n            console.error(\"Error listing files from Google Cloud Storage:\", error);\n            return [];\n        }\n    }\n    /**\n\t * Delete a file from Google Cloud Storage\n\t */ static async deleteFile(path) {\n        try {\n            if (!bucket) {\n                throw new Error(\"Google Cloud Storage not initialized\");\n            }\n            const gcsFile = bucket.file(path);\n            await gcsFile.delete();\n            console.log(`File deleted from GCS: ${path}`);\n        } catch (error) {\n            console.error(\"Error deleting file from Google Cloud Storage:\", error);\n            throw new Error(\"Failed to delete file from Google Cloud Storage\");\n        }\n    }\n    /**\n\t * Get signed URL for file access with caching\n\t */ static async getSignedUrl(path, expiresIn = 3600) {\n        try {\n            if (!bucket) {\n                throw new Error(\"Google Cloud Storage not initialized\");\n            }\n            // Clean up expired cache entries periodically\n            this.clearExpiredCache();\n            // Check cache first (with 5-minute buffer before expiration)\n            const cacheKey = `${path}:${expiresIn}`;\n            const cached = signedUrlCache.get(cacheKey);\n            const now = Date.now();\n            if (cached && cached.expiresAt > now + 5 * 60 * 1000) {\n                console.log(`Using cached signed URL for GCS file: ${path}`);\n                return cached.url;\n            }\n            // Generate new signed URL\n            const gcsFile = bucket.file(path);\n            const expirationTime = Date.now() + expiresIn * 1000;\n            const [signedUrl] = await gcsFile.getSignedUrl({\n                action: \"read\",\n                expires: expirationTime\n            });\n            // Cache the URL (expires 5 minutes before actual expiration for safety)\n            signedUrlCache.set(cacheKey, {\n                url: signedUrl,\n                expiresAt: expirationTime - 5 * 60 * 1000\n            });\n            console.log(`Generated and cached signed URL for GCS file: ${path}`);\n            return signedUrl;\n        } catch (error) {\n            console.error(\"Error generating signed URL for Google Cloud Storage:\", error);\n            throw new Error(\"Failed to generate signed URL from Google Cloud Storage\");\n        }\n    }\n    /**\n\t * Save artist data in organized folder structure\n\t */ static async saveArtistData(artistData) {\n        const artistId = artistData.id;\n        const eventId = artistData.eventId;\n        try {\n            // Save main profile data\n            await this.saveJSON({\n                id: artistData.id,\n                artistName: artistData.artistName,\n                realName: artistData.realName,\n                email: artistData.email,\n                phone: artistData.phone,\n                style: artistData.style,\n                performanceType: artistData.performanceType,\n                performanceDuration: artistData.performanceDuration,\n                biography: artistData.biography,\n                createdAt: artistData.createdAt,\n                status: artistData.status,\n                eventId: artistData.eventId,\n                eventName: artistData.eventName\n            }, `artists/${artistId}/profile.json`);\n            // Save technical specifications\n            await this.saveJSON({\n                costumeColor: artistData.costumeColor,\n                customCostumeColor: artistData.customCostumeColor,\n                lightColorSingle: artistData.lightColorSingle,\n                lightColorTwo: artistData.lightColorTwo,\n                lightColorThree: artistData.lightColorThree,\n                lightRequests: artistData.lightRequests,\n                stagePositionStart: artistData.stagePositionStart,\n                stagePositionEnd: artistData.stagePositionEnd,\n                customStagePosition: artistData.customStagePosition,\n                equipment: artistData.equipment,\n                specialRequirements: artistData.specialRequirements\n            }, `artists/${artistId}/technical.json`);\n            // Save social media and links\n            await this.saveJSON({\n                socialMedia: artistData.socialMedia,\n                showLink: artistData.showLink\n            }, `artists/${artistId}/social.json`);\n            // Save notes and communications\n            await this.saveJSON({\n                mcNotes: artistData.mcNotes,\n                stageManagerNotes: artistData.stageManagerNotes,\n                notes: artistData.notes\n            }, `artists/${artistId}/notes.json`);\n            // Save music tracks metadata\n            await this.saveJSON({\n                tracks: artistData.musicTracks || []\n            }, `artists/${artistId}/music.json`);\n            // Save gallery metadata\n            await this.saveJSON({\n                files: artistData.galleryFiles || []\n            }, `artists/${artistId}/gallery.json`);\n            // Save event association\n            await this.saveJSON({\n                artistId: artistData.id,\n                artistName: artistData.artistName,\n                eventId: artistData.eventId,\n                eventName: artistData.eventName,\n                status: artistData.status,\n                registrationDate: artistData.createdAt\n            }, `events/${eventId}/artists/${artistId}.json`);\n            console.log(`Artist data saved to storage for artist: ${artistId}`);\n        } catch (error) {\n            console.error(\"Error saving artist data:\", error);\n            throw error;\n        }\n    }\n    /**\n\t * Get complete artist data from storage\n\t */ static async getArtistData(artistId) {\n        try {\n            const [profile, technical, social, notes, music, gallery] = await Promise.all([\n                this.readJSON(`artists/${artistId}/profile.json`),\n                this.readJSON(`artists/${artistId}/technical.json`),\n                this.readJSON(`artists/${artistId}/social.json`),\n                this.readJSON(`artists/${artistId}/notes.json`),\n                this.readJSON(`artists/${artistId}/music.json`),\n                this.readJSON(`artists/${artistId}/gallery.json`)\n            ]);\n            if (!profile) {\n                return null;\n            }\n            // Enrich media with fresh signed URLs\n            const rawTracks = Array.isArray(music?.tracks) ? music.tracks : [];\n            const musicTracks = await Promise.all(rawTracks.map(async (t)=>{\n                const track = {\n                    ...t\n                };\n                const isBlob = this.isBlobUrl(track.file_url);\n                if ((isBlob || !track.file_url) && track.file_path) {\n                    try {\n                        track.file_url = await this.getSignedUrl(track.file_path, 24 * 60 * 60);\n                    } catch (e) {\n                        console.error(\"Failed to sign music track path:\", track.file_path, e);\n                        // Set to null so UI can handle the error\n                        track.file_url = null;\n                    }\n                }\n                return track;\n            }));\n            const rawFiles = Array.isArray(gallery?.files) ? gallery.files : [];\n            const galleryFiles = await Promise.all(rawFiles.map(async (f)=>{\n                const file = {\n                    ...f\n                };\n                const isBlob = this.isBlobUrl(file.file_url);\n                if ((isBlob || !file.file_url) && file.file_path) {\n                    try {\n                        file.file_url = await this.getSignedUrl(file.file_path, 24 * 60 * 60);\n                    } catch (e) {\n                        console.error(\"Failed to sign gallery file path:\", file.file_path, e);\n                        // Set to null so UI can handle the error\n                        file.file_url = null;\n                    }\n                }\n                return file;\n            }));\n            return {\n                ...profile,\n                ...technical,\n                ...social,\n                ...notes,\n                musicTracks,\n                galleryFiles\n            };\n        } catch (error) {\n            console.error(\"Error getting artist data:\", error);\n            return null;\n        }\n    }\n    /**\n\t * Batch fetch multiple artists efficiently\n\t */ static async batchGetArtistData(artistIds) {\n        try {\n            // Batch all file reads for all artists\n            const allFileReads = artistIds.flatMap((artistId)=>[\n                    this.readJSON(`artists/${artistId}/profile.json`),\n                    this.readJSON(`artists/${artistId}/technical.json`),\n                    this.readJSON(`artists/${artistId}/social.json`),\n                    this.readJSON(`artists/${artistId}/notes.json`),\n                    this.readJSON(`artists/${artistId}/music.json`),\n                    this.readJSON(`artists/${artistId}/gallery.json`)\n                ]);\n            // Execute all reads in parallel\n            const allResults = await Promise.all(allFileReads);\n            // Process results for each artist\n            const artists = await Promise.all(artistIds.map(async (artistId, index)=>{\n                const baseIndex = index * 6;\n                const [profile, technical, social, notes, music, gallery] = allResults.slice(baseIndex, baseIndex + 6);\n                if (!profile) {\n                    return null;\n                }\n                // Process media files with lazy loading approach\n                const rawTracks = Array.isArray(music?.tracks) ? music.tracks : [];\n                const rawFiles = Array.isArray(gallery?.files) ? gallery.files : [];\n                // Only generate signed URLs for media that will be immediately visible\n                // For performance, we'll defer URL generation for gallery files\n                const musicTracks = await Promise.all(rawTracks.slice(0, 3).map(async (t)=>{\n                    // Only first 3 tracks\n                    const track = {\n                        ...t\n                    };\n                    if (this.isBlobUrl(track.file_url) && track.file_path) {\n                        try {\n                            track.file_url = await this.getSignedUrl(track.file_path, 24 * 60 * 60);\n                        } catch (e) {\n                            console.error(\"Failed to sign music track path:\", track.file_path, e);\n                            track.file_url = null;\n                        }\n                    }\n                    return track;\n                }));\n                // Add remaining tracks without URLs (lazy loading)\n                const remainingTracks = rawTracks.slice(3).map((t)=>({\n                        ...t,\n                        file_url: t.file_path ? null : t.file_url,\n                        needsUrl: !!t.file_path\n                    }));\n                // For gallery, only process first few images for preview\n                const galleryFiles = rawFiles.slice(0, 6).map((f)=>({\n                        ...f,\n                        url: f.file_path ? null : f.url,\n                        needsUrl: !!f.file_path\n                    }));\n                return {\n                    ...profile,\n                    ...technical,\n                    ...social,\n                    ...notes,\n                    musicTracks: [\n                        ...musicTracks,\n                        ...remainingTracks\n                    ],\n                    galleryFiles,\n                    totalMusicTracks: rawTracks.length,\n                    totalGalleryFiles: rawFiles.length\n                };\n            }));\n            return artists.filter((artist)=>artist !== null);\n        } catch (error) {\n            console.error(\"Error batch getting artist data:\", error);\n            return [];\n        }\n    }\n    /**\n\t * Lazy load media URLs for a specific artist\n\t */ static async loadArtistMediaUrls(artistId, mediaType, startIndex = 0, count = 10) {\n        try {\n            const mediaData = mediaType === \"music\" ? await this.readJSON(`artists/${artistId}/music.json`) : await this.readJSON(`artists/${artistId}/gallery.json`);\n            const items = mediaType === \"music\" ? Array.isArray(mediaData?.tracks) ? mediaData.tracks : [] : Array.isArray(mediaData?.files) ? mediaData.files : [];\n            const selectedItems = items.slice(startIndex, startIndex + count);\n            // Generate signed URLs for the requested items\n            const itemsWithUrls = await Promise.all(selectedItems.map(async (item)=>{\n                const urlField = mediaType === \"music\" ? \"file_url\" : \"url\";\n                const pathField = mediaType === \"music\" ? \"file_path\" : \"file_path\";\n                if (this.isBlobUrl(item[urlField]) && item[pathField]) {\n                    try {\n                        item[urlField] = await this.getSignedUrl(item[pathField], 24 * 60 * 60);\n                    } catch (e) {\n                        console.error(`Failed to sign ${mediaType} path:`, item[pathField], e);\n                        item[urlField] = null;\n                    }\n                }\n                return item;\n            }));\n            return itemsWithUrls;\n        } catch (error) {\n            console.error(`Error loading ${mediaType} URLs for artist ${artistId}:`, error);\n            return [];\n        }\n    }\n    /**\n\t * Get all artists for an event (simplified for demo)\n\t */ static async getEventArtists(eventId) {\n        try {\n            // For demo purposes, we'll return a sample artist if no real data exists\n            const sampleArtist = {\n                id: \"artist_1755011489205_xswjcvfdv\",\n                artistName: \"Water Festival Stage\",\n                realName: \"John Wick (Htoo Aung Wai)\",\n                email: \"john@gmail.com\",\n                phone: \"052 211 6024\",\n                style: \"Death Metal\",\n                performanceType: \"other\",\n                performanceDuration: 5,\n                biography: \"I like Death Metal.\",\n                costumeColor: \"red\",\n                lightColorSingle: \"blue\",\n                lightColorTwo: \"magenta\",\n                lightColorThree: \"amber\",\n                stagePositionStart: \"downstage-left\",\n                stagePositionEnd: \"left\",\n                socialMedia: {\n                    instagram: \"https://www.officeolympics.io\",\n                    facebook: \"https://www.officeolympics.io\",\n                    youtube: \"https://www.officeolympics.io\",\n                    tiktok: \"https://www.officeolympics.io\",\n                    website: \"https://www.officeolympics.io\"\n                },\n                eventId,\n                eventName: \"EDM Festival\",\n                status: \"pending\",\n                createdAt: \"2025-08-12T15:11:29.205Z\",\n                musicTracks: [\n                    {\n                        song_title: \"Metal\",\n                        duration: 2,\n                        notes: \"No one\",\n                        is_main_track: true,\n                        tempo: \"medium\"\n                    }\n                ],\n                galleryFiles: []\n            };\n            return [\n                sampleArtist\n            ];\n        } catch (error) {\n            console.error(\"Error getting event artists:\", error);\n            return [];\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GCSService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1YxRCxPQUFPO3dCQUNQMkQsZUFBZTt3QkFDZkMsT0FBTztvQkFDUjtpQkFDQTtnQkFDRHpELGNBQWMsRUFBRTtZQUNqQjtZQUNBLE9BQU87Z0JBQUNnRDthQUFhO1FBQ3RCLEVBQUUsT0FBTzFJLE9BQU87WUFDZkYsUUFBUUUsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDOUMsT0FBTyxFQUFFO1FBQ1Y7SUFDRDtBQUNEO0FBRUEsaUVBQWVJLFVBQVVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL2dvb2dsZS1jbG91ZC1zdG9yYWdlLnRzPzUxYzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gXCJAZ29vZ2xlLWNsb3VkL3N0b3JhZ2VcIjtcblxuLy8gSW5pdGlhbGl6ZSBHb29nbGUgQ2xvdWQgU3RvcmFnZVxubGV0IHN0b3JhZ2U6IFN0b3JhZ2UgfCBudWxsID0gbnVsbDtcbmxldCBidWNrZXQ6IGFueSA9IG51bGw7XG5jb25zdCBidWNrZXROYW1lID0gcHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX0JVQ0tFVF9OQU1FIHx8IFwiZmFtZS1ldmVudC1kYXRhXCI7XG5cbi8vIEluaXRpYWxpemUgR29vZ2xlIENsb3VkIFN0b3JhZ2VcbnRyeSB7XG5cdC8vIFRyeSBkaWZmZXJlbnQgYXV0aGVudGljYXRpb24gbWV0aG9kc1xuXHRpZiAocHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX1BST0pFQ1RfSUQpIHtcblx0XHRjb25zdCBzdG9yYWdlQ29uZmlnOiBhbnkgPSB7XG5cdFx0XHRwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTE9VRF9QUk9KRUNUX0lELFxuXHRcdH07XG5cblx0XHQvLyBVc2Uga2V5IGZpbGUgaWYgcHJvdmlkZWRcblx0XHRpZiAocHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX0tFWV9GSUxFKSB7XG5cdFx0XHRzdG9yYWdlQ29uZmlnLmtleUZpbGVuYW1lID0gcHJvY2Vzcy5lbnYuR09PR0xFX0NMT1VEX0tFWV9GSUxFO1xuXHRcdH1cblx0XHQvLyBVc2Ugc2VydmljZSBhY2NvdW50IGtleSBpZiBwcm92aWRlZCBhcyBKU09OIHN0cmluZ1xuXHRcdGVsc2UgaWYgKHByb2Nlc3MuZW52LkdPT0dMRV9DTE9VRF9DUkVERU5USUFMUykge1xuXHRcdFx0c3RvcmFnZUNvbmZpZy5jcmVkZW50aWFscyA9IEpTT04ucGFyc2UoXG5cdFx0XHRcdHByb2Nlc3MuZW52LkdPT0dMRV9DTE9VRF9DUkVERU5USUFMU1xuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRzdG9yYWdlID0gbmV3IFN0b3JhZ2Uoc3RvcmFnZUNvbmZpZyk7XG5cdFx0YnVja2V0ID0gc3RvcmFnZS5idWNrZXQoYnVja2V0TmFtZSk7XG5cdFx0Y29uc29sZS5sb2coXG5cdFx0XHRgR29vZ2xlIENsb3VkIFN0b3JhZ2UgaW5pdGlhbGl6ZWQgd2l0aCBidWNrZXQ6ICR7YnVja2V0TmFtZX1gXG5cdFx0KTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XCJHb29nbGUgQ2xvdWQgU3RvcmFnZSBub3QgY29uZmlndXJlZDogTWlzc2luZyBHT09HTEVfQ0xPVURfUFJPSkVDVF9JRFwiXG5cdFx0KTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQ2xvdWQgU3RvcmFnZSBjb25maWd1cmF0aW9uIG1pc3NpbmdcIik7XG5cdH1cbn0gY2F0Y2ggKGVycm9yKSB7XG5cdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBHb29nbGUgQ2xvdWQgU3RvcmFnZTpcIiwgZXJyb3IpO1xuXHR0aHJvdyBlcnJvcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlVXBsb2FkUmVzdWx0IHtcblx0dXJsOiBzdHJpbmc7XG5cdGZpbGVuYW1lOiBzdHJpbmc7XG5cdHNpemU6IG51bWJlcjtcblx0Y29udGVudFR5cGU6IHN0cmluZztcblx0Z2NzUGF0aDogc3RyaW5nO1xufVxuXG4vLyBTaWduZWQgVVJMIGNhY2hlIHdpdGggVFRMXG5pbnRlcmZhY2UgQ2FjaGVkU2lnbmVkVXJsIHtcblx0dXJsOiBzdHJpbmc7XG5cdGV4cGlyZXNBdDogbnVtYmVyO1xufVxuXG5jb25zdCBzaWduZWRVcmxDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBDYWNoZWRTaWduZWRVcmw+KCk7XG5cbmV4cG9ydCBjbGFzcyBHQ1NTZXJ2aWNlIHtcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgVVJMIGlzIGEgYmxvYiBVUkwgdGhhdCBuZWVkcyB0byBiZSByZXBsYWNlZFxuXHQgKi9cblx0c3RhdGljIGlzQmxvYlVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHQodXJsLnN0YXJ0c1dpdGgoXCJibG9iOlwiKSB8fCB1cmwgPT09IFwiXCIgfHwgIXVybClcblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENsZWFyIGV4cGlyZWQgZW50cmllcyBmcm9tIHRoZSBzaWduZWQgVVJMIGNhY2hlXG5cdCAqL1xuXHRzdGF0aWMgY2xlYXJFeHBpcmVkQ2FjaGUoKTogdm9pZCB7XG5cdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIGNhY2hlZF0gb2Ygc2lnbmVkVXJsQ2FjaGUuZW50cmllcygpKSB7XG5cdFx0XHRpZiAoY2FjaGVkLmV4cGlyZXNBdCA8PSBub3cpIHtcblx0XHRcdFx0c2lnbmVkVXJsQ2FjaGUuZGVsZXRlKGtleSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgZmlsZSBleGlzdHMgaW4gR29vZ2xlIENsb3VkIFN0b3JhZ2Vcblx0ICovXG5cdHN0YXRpYyBhc3luYyBmaWxlRXhpc3RzKHBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIWJ1Y2tldCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBnY3NGaWxlID0gYnVja2V0LmZpbGUocGF0aCk7XG5cdFx0XHRjb25zdCBbZXhpc3RzXSA9IGF3YWl0IGdjc0ZpbGUuZXhpc3RzKCk7XG5cdFx0XHRyZXR1cm4gZXhpc3RzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBpZiBmaWxlIGV4aXN0czogJHtwYXRofWAsIGVycm9yKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVXBsb2FkIGEgZmlsZSB0byBHb29nbGUgQ2xvdWQgU3RvcmFnZSB3aXRoIGVuaGFuY2VkIGVycm9yIGhhbmRsaW5nXG5cdCAqL1xuXHRzdGF0aWMgYXN5bmMgdXBsb2FkRmlsZShcblx0XHRmaWxlOiBCdWZmZXIsXG5cdFx0ZmlsZW5hbWU6IHN0cmluZyxcblx0XHRmb2xkZXI6IHN0cmluZyxcblx0XHRjb250ZW50VHlwZTogc3RyaW5nXG5cdCk6IFByb21pc2U8RmlsZVVwbG9hZFJlc3VsdD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIWJ1Y2tldCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQ2xvdWQgU3RvcmFnZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGdjc1BhdGggPSBgJHtmb2xkZXJ9LyR7ZmlsZW5hbWV9YDtcblx0XHRcdGNvbnN0IGdjc0ZpbGUgPSBidWNrZXQuZmlsZShnY3NQYXRoKTtcblxuXHRcdFx0YXdhaXQgZ2NzRmlsZS5zYXZlKGZpbGUsIHtcblx0XHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0XHRjb250ZW50VHlwZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0cHVibGljOiBmYWxzZSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBHZW5lcmF0ZSBpbml0aWFsIHNpZ25lZCBVUkwgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcblx0XHRcdGNvbnN0IHNpZ25lZFVybCA9IGF3YWl0IHRoaXMuZ2V0U2lnbmVkVXJsKGdjc1BhdGgsIDI0ICogNjAgKiA2MCk7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVybDogc2lnbmVkVXJsLFxuXHRcdFx0XHRmaWxlbmFtZSxcblx0XHRcdFx0c2l6ZTogZmlsZS5sZW5ndGgsXG5cdFx0XHRcdGNvbnRlbnRUeXBlLFxuXHRcdFx0XHRnY3NQYXRoLCAvLyBTdG9yZSB0aGUgcGF0aCBmb3IgZnV0dXJlIFVSTCBnZW5lcmF0aW9uXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcIkVycm9yIHVwbG9hZGluZyBmaWxlIHRvIEdvb2dsZSBDbG91ZCBTdG9yYWdlOlwiLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0KTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGxvYWQgZmlsZSB0byBHb29nbGUgQ2xvdWQgU3RvcmFnZVwiKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU2F2ZSBKU09OIGRhdGEgdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2Vcblx0ICovXG5cdHN0YXRpYyBhc3luYyBzYXZlSlNPTihkYXRhOiBhbnksIHBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIWJ1Y2tldCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQ2xvdWQgU3RvcmFnZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XG5cdFx0XHRjb25zdCBnY3NGaWxlID0gYnVja2V0LmZpbGUocGF0aCk7XG5cblx0XHRcdGF3YWl0IGdjc0ZpbGUuc2F2ZShqc29uRGF0YSwge1xuXHRcdFx0XHRtZXRhZGF0YToge1xuXHRcdFx0XHRcdGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zb2xlLmxvZyhgSlNPTiBkYXRhIHNhdmVkIHRvIEdDUzogJHtwYXRofWApO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIEpTT04gdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2U6XCIsIGVycm9yKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBzYXZlIGRhdGEgdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2VcIik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlYWQgSlNPTiBkYXRhIGZyb20gR29vZ2xlIENsb3VkIFN0b3JhZ2Vcblx0ICovXG5cdHN0YXRpYyBhc3luYyByZWFkSlNPTihwYXRoOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIWJ1Y2tldCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQ2xvdWQgU3RvcmFnZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGdjc0ZpbGUgPSBidWNrZXQuZmlsZShwYXRoKTtcblx0XHRcdGNvbnN0IFtleGlzdHNdID0gYXdhaXQgZ2NzRmlsZS5leGlzdHMoKTtcblxuXHRcdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYEZpbGUgbm90IGZvdW5kIGluIEdDUzogJHtwYXRofWApO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgW2NvbnRlbnRzXSA9IGF3YWl0IGdjc0ZpbGUuZG93bmxvYWQoKTtcblx0XHRcdGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnRzLnRvU3RyaW5nKCkpO1xuXHRcdFx0Y29uc29sZS5sb2coYEpTT04gZGF0YSByZWFkIGZyb20gR0NTOiAke3BhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XCJFcnJvciByZWFkaW5nIEpTT04gZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZTpcIixcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTGlzdCBmaWxlcyBpbiBhIGZvbGRlclxuXHQgKi9cblx0c3RhdGljIGFzeW5jIGxpc3RGaWxlcyhwcmVmaXg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKCFidWNrZXQpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiR29vZ2xlIENsb3VkIFN0b3JhZ2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBbZmlsZXNdID0gYXdhaXQgYnVja2V0LmdldEZpbGVzKHsgcHJlZml4IH0pO1xuXHRcdFx0Y29uc3QgZmlsZU5hbWVzID0gZmlsZXMubWFwKChmaWxlOiBhbnkpID0+IGZpbGUubmFtZSk7XG5cdFx0XHRjb25zb2xlLmxvZyhcblx0XHRcdFx0YExpc3RlZCAke2ZpbGVOYW1lcy5sZW5ndGh9IGZpbGVzIGZyb20gR0NTIHdpdGggcHJlZml4OiAke3ByZWZpeH1gXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIGZpbGVOYW1lcztcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XCJFcnJvciBsaXN0aW5nIGZpbGVzIGZyb20gR29vZ2xlIENsb3VkIFN0b3JhZ2U6XCIsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBEZWxldGUgYSBmaWxlIGZyb20gR29vZ2xlIENsb3VkIFN0b3JhZ2Vcblx0ICovXG5cdHN0YXRpYyBhc3luYyBkZWxldGVGaWxlKHBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIWJ1Y2tldCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQ2xvdWQgU3RvcmFnZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGdjc0ZpbGUgPSBidWNrZXQuZmlsZShwYXRoKTtcblx0XHRcdGF3YWl0IGdjc0ZpbGUuZGVsZXRlKCk7XG5cdFx0XHRjb25zb2xlLmxvZyhgRmlsZSBkZWxldGVkIGZyb20gR0NTOiAke3BhdGh9YCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFwiRXJyb3IgZGVsZXRpbmcgZmlsZSBmcm9tIEdvb2dsZSBDbG91ZCBTdG9yYWdlOlwiLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0KTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWxldGUgZmlsZSBmcm9tIEdvb2dsZSBDbG91ZCBTdG9yYWdlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgc2lnbmVkIFVSTCBmb3IgZmlsZSBhY2Nlc3Mgd2l0aCBjYWNoaW5nXG5cdCAqL1xuXHRzdGF0aWMgYXN5bmMgZ2V0U2lnbmVkVXJsKFxuXHRcdHBhdGg6IHN0cmluZyxcblx0XHRleHBpcmVzSW46IG51bWJlciA9IDM2MDBcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKCFidWNrZXQpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiR29vZ2xlIENsb3VkIFN0b3JhZ2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDbGVhbiB1cCBleHBpcmVkIGNhY2hlIGVudHJpZXMgcGVyaW9kaWNhbGx5XG5cdFx0XHR0aGlzLmNsZWFyRXhwaXJlZENhY2hlKCk7XG5cblx0XHRcdC8vIENoZWNrIGNhY2hlIGZpcnN0ICh3aXRoIDUtbWludXRlIGJ1ZmZlciBiZWZvcmUgZXhwaXJhdGlvbilcblx0XHRcdGNvbnN0IGNhY2hlS2V5ID0gYCR7cGF0aH06JHtleHBpcmVzSW59YDtcblx0XHRcdGNvbnN0IGNhY2hlZCA9IHNpZ25lZFVybENhY2hlLmdldChjYWNoZUtleSk7XG5cdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG5cdFx0XHRpZiAoY2FjaGVkICYmIGNhY2hlZC5leHBpcmVzQXQgPiBub3cgKyA1ICogNjAgKiAxMDAwKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGBVc2luZyBjYWNoZWQgc2lnbmVkIFVSTCBmb3IgR0NTIGZpbGU6ICR7cGF0aH1gKTtcblx0XHRcdFx0cmV0dXJuIGNhY2hlZC51cmw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEdlbmVyYXRlIG5ldyBzaWduZWQgVVJMXG5cdFx0XHRjb25zdCBnY3NGaWxlID0gYnVja2V0LmZpbGUocGF0aCk7XG5cdFx0XHRjb25zdCBleHBpcmF0aW9uVGltZSA9IERhdGUubm93KCkgKyBleHBpcmVzSW4gKiAxMDAwO1xuXHRcdFx0Y29uc3QgW3NpZ25lZFVybF0gPSBhd2FpdCBnY3NGaWxlLmdldFNpZ25lZFVybCh7XG5cdFx0XHRcdGFjdGlvbjogXCJyZWFkXCIsXG5cdFx0XHRcdGV4cGlyZXM6IGV4cGlyYXRpb25UaW1lLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIENhY2hlIHRoZSBVUkwgKGV4cGlyZXMgNSBtaW51dGVzIGJlZm9yZSBhY3R1YWwgZXhwaXJhdGlvbiBmb3Igc2FmZXR5KVxuXHRcdFx0c2lnbmVkVXJsQ2FjaGUuc2V0KGNhY2hlS2V5LCB7XG5cdFx0XHRcdHVybDogc2lnbmVkVXJsLFxuXHRcdFx0XHRleHBpcmVzQXQ6IGV4cGlyYXRpb25UaW1lIC0gNSAqIDYwICogMTAwMCxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zb2xlLmxvZyhcblx0XHRcdFx0YEdlbmVyYXRlZCBhbmQgY2FjaGVkIHNpZ25lZCBVUkwgZm9yIEdDUyBmaWxlOiAke3BhdGh9YFxuXHRcdFx0KTtcblx0XHRcdHJldHVybiBzaWduZWRVcmw7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFwiRXJyb3IgZ2VuZXJhdGluZyBzaWduZWQgVVJMIGZvciBHb29nbGUgQ2xvdWQgU3RvcmFnZTpcIixcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFwiRmFpbGVkIHRvIGdlbmVyYXRlIHNpZ25lZCBVUkwgZnJvbSBHb29nbGUgQ2xvdWQgU3RvcmFnZVwiXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTYXZlIGFydGlzdCBkYXRhIGluIG9yZ2FuaXplZCBmb2xkZXIgc3RydWN0dXJlXG5cdCAqL1xuXHRzdGF0aWMgYXN5bmMgc2F2ZUFydGlzdERhdGEoYXJ0aXN0RGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgYXJ0aXN0SWQgPSBhcnRpc3REYXRhLmlkO1xuXHRcdGNvbnN0IGV2ZW50SWQgPSBhcnRpc3REYXRhLmV2ZW50SWQ7XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gU2F2ZSBtYWluIHByb2ZpbGUgZGF0YVxuXHRcdFx0YXdhaXQgdGhpcy5zYXZlSlNPTihcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlkOiBhcnRpc3REYXRhLmlkLFxuXHRcdFx0XHRcdGFydGlzdE5hbWU6IGFydGlzdERhdGEuYXJ0aXN0TmFtZSxcblx0XHRcdFx0XHRyZWFsTmFtZTogYXJ0aXN0RGF0YS5yZWFsTmFtZSxcblx0XHRcdFx0XHRlbWFpbDogYXJ0aXN0RGF0YS5lbWFpbCxcblx0XHRcdFx0XHRwaG9uZTogYXJ0aXN0RGF0YS5waG9uZSxcblx0XHRcdFx0XHRzdHlsZTogYXJ0aXN0RGF0YS5zdHlsZSxcblx0XHRcdFx0XHRwZXJmb3JtYW5jZVR5cGU6IGFydGlzdERhdGEucGVyZm9ybWFuY2VUeXBlLFxuXHRcdFx0XHRcdHBlcmZvcm1hbmNlRHVyYXRpb246IGFydGlzdERhdGEucGVyZm9ybWFuY2VEdXJhdGlvbixcblx0XHRcdFx0XHRiaW9ncmFwaHk6IGFydGlzdERhdGEuYmlvZ3JhcGh5LFxuXHRcdFx0XHRcdGNyZWF0ZWRBdDogYXJ0aXN0RGF0YS5jcmVhdGVkQXQsXG5cdFx0XHRcdFx0c3RhdHVzOiBhcnRpc3REYXRhLnN0YXR1cyxcblx0XHRcdFx0XHRldmVudElkOiBhcnRpc3REYXRhLmV2ZW50SWQsXG5cdFx0XHRcdFx0ZXZlbnROYW1lOiBhcnRpc3REYXRhLmV2ZW50TmFtZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YGFydGlzdHMvJHthcnRpc3RJZH0vcHJvZmlsZS5qc29uYFxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gU2F2ZSB0ZWNobmljYWwgc3BlY2lmaWNhdGlvbnNcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZUpTT04oXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb3N0dW1lQ29sb3I6IGFydGlzdERhdGEuY29zdHVtZUNvbG9yLFxuXHRcdFx0XHRcdGN1c3RvbUNvc3R1bWVDb2xvcjogYXJ0aXN0RGF0YS5jdXN0b21Db3N0dW1lQ29sb3IsXG5cdFx0XHRcdFx0bGlnaHRDb2xvclNpbmdsZTogYXJ0aXN0RGF0YS5saWdodENvbG9yU2luZ2xlLFxuXHRcdFx0XHRcdGxpZ2h0Q29sb3JUd286IGFydGlzdERhdGEubGlnaHRDb2xvclR3byxcblx0XHRcdFx0XHRsaWdodENvbG9yVGhyZWU6IGFydGlzdERhdGEubGlnaHRDb2xvclRocmVlLFxuXHRcdFx0XHRcdGxpZ2h0UmVxdWVzdHM6IGFydGlzdERhdGEubGlnaHRSZXF1ZXN0cyxcblx0XHRcdFx0XHRzdGFnZVBvc2l0aW9uU3RhcnQ6IGFydGlzdERhdGEuc3RhZ2VQb3NpdGlvblN0YXJ0LFxuXHRcdFx0XHRcdHN0YWdlUG9zaXRpb25FbmQ6IGFydGlzdERhdGEuc3RhZ2VQb3NpdGlvbkVuZCxcblx0XHRcdFx0XHRjdXN0b21TdGFnZVBvc2l0aW9uOiBhcnRpc3REYXRhLmN1c3RvbVN0YWdlUG9zaXRpb24sXG5cdFx0XHRcdFx0ZXF1aXBtZW50OiBhcnRpc3REYXRhLmVxdWlwbWVudCxcblx0XHRcdFx0XHRzcGVjaWFsUmVxdWlyZW1lbnRzOiBhcnRpc3REYXRhLnNwZWNpYWxSZXF1aXJlbWVudHMsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGBhcnRpc3RzLyR7YXJ0aXN0SWR9L3RlY2huaWNhbC5qc29uYFxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gU2F2ZSBzb2NpYWwgbWVkaWEgYW5kIGxpbmtzXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVKU09OKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c29jaWFsTWVkaWE6IGFydGlzdERhdGEuc29jaWFsTWVkaWEsXG5cdFx0XHRcdFx0c2hvd0xpbms6IGFydGlzdERhdGEuc2hvd0xpbmssXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGBhcnRpc3RzLyR7YXJ0aXN0SWR9L3NvY2lhbC5qc29uYFxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gU2F2ZSBub3RlcyBhbmQgY29tbXVuaWNhdGlvbnNcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZUpTT04oXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRtY05vdGVzOiBhcnRpc3REYXRhLm1jTm90ZXMsXG5cdFx0XHRcdFx0c3RhZ2VNYW5hZ2VyTm90ZXM6IGFydGlzdERhdGEuc3RhZ2VNYW5hZ2VyTm90ZXMsXG5cdFx0XHRcdFx0bm90ZXM6IGFydGlzdERhdGEubm90ZXMsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGBhcnRpc3RzLyR7YXJ0aXN0SWR9L25vdGVzLmpzb25gXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBTYXZlIG11c2ljIHRyYWNrcyBtZXRhZGF0YVxuXHRcdFx0YXdhaXQgdGhpcy5zYXZlSlNPTihcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRyYWNrczogYXJ0aXN0RGF0YS5tdXNpY1RyYWNrcyB8fCBbXSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YGFydGlzdHMvJHthcnRpc3RJZH0vbXVzaWMuanNvbmBcblx0XHRcdCk7XG5cblx0XHRcdC8vIFNhdmUgZ2FsbGVyeSBtZXRhZGF0YVxuXHRcdFx0YXdhaXQgdGhpcy5zYXZlSlNPTihcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZpbGVzOiBhcnRpc3REYXRhLmdhbGxlcnlGaWxlcyB8fCBbXSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YGFydGlzdHMvJHthcnRpc3RJZH0vZ2FsbGVyeS5qc29uYFxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gU2F2ZSBldmVudCBhc3NvY2lhdGlvblxuXHRcdFx0YXdhaXQgdGhpcy5zYXZlSlNPTihcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGFydGlzdElkOiBhcnRpc3REYXRhLmlkLFxuXHRcdFx0XHRcdGFydGlzdE5hbWU6IGFydGlzdERhdGEuYXJ0aXN0TmFtZSxcblx0XHRcdFx0XHRldmVudElkOiBhcnRpc3REYXRhLmV2ZW50SWQsXG5cdFx0XHRcdFx0ZXZlbnROYW1lOiBhcnRpc3REYXRhLmV2ZW50TmFtZSxcblx0XHRcdFx0XHRzdGF0dXM6IGFydGlzdERhdGEuc3RhdHVzLFxuXHRcdFx0XHRcdHJlZ2lzdHJhdGlvbkRhdGU6IGFydGlzdERhdGEuY3JlYXRlZEF0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRgZXZlbnRzLyR7ZXZlbnRJZH0vYXJ0aXN0cy8ke2FydGlzdElkfS5qc29uYFxuXHRcdFx0KTtcblxuXHRcdFx0Y29uc29sZS5sb2coYEFydGlzdCBkYXRhIHNhdmVkIHRvIHN0b3JhZ2UgZm9yIGFydGlzdDogJHthcnRpc3RJZH1gKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBhcnRpc3QgZGF0YTpcIiwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBjb21wbGV0ZSBhcnRpc3QgZGF0YSBmcm9tIHN0b3JhZ2Vcblx0ICovXG5cdHN0YXRpYyBhc3luYyBnZXRBcnRpc3REYXRhKGFydGlzdElkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBbcHJvZmlsZSwgdGVjaG5pY2FsLCBzb2NpYWwsIG5vdGVzLCBtdXNpYywgZ2FsbGVyeV0gPVxuXHRcdFx0XHRhd2FpdCBQcm9taXNlLmFsbChbXG5cdFx0XHRcdFx0dGhpcy5yZWFkSlNPTihgYXJ0aXN0cy8ke2FydGlzdElkfS9wcm9maWxlLmpzb25gKSxcblx0XHRcdFx0XHR0aGlzLnJlYWRKU09OKGBhcnRpc3RzLyR7YXJ0aXN0SWR9L3RlY2huaWNhbC5qc29uYCksXG5cdFx0XHRcdFx0dGhpcy5yZWFkSlNPTihgYXJ0aXN0cy8ke2FydGlzdElkfS9zb2NpYWwuanNvbmApLFxuXHRcdFx0XHRcdHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vbm90ZXMuanNvbmApLFxuXHRcdFx0XHRcdHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vbXVzaWMuanNvbmApLFxuXHRcdFx0XHRcdHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vZ2FsbGVyeS5qc29uYCksXG5cdFx0XHRcdF0pO1xuXG5cdFx0XHRpZiAoIXByb2ZpbGUpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEVucmljaCBtZWRpYSB3aXRoIGZyZXNoIHNpZ25lZCBVUkxzXG5cdFx0XHRjb25zdCByYXdUcmFja3MgPSBBcnJheS5pc0FycmF5KG11c2ljPy50cmFja3MpID8gbXVzaWMudHJhY2tzIDogW107XG5cdFx0XHRjb25zdCBtdXNpY1RyYWNrcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0XHRyYXdUcmFja3MubWFwKGFzeW5jICh0OiBhbnkpID0+IHtcblx0XHRcdFx0XHRjb25zdCB0cmFjayA9IHsgLi4udCB9O1xuXHRcdFx0XHRcdGNvbnN0IGlzQmxvYiA9IHRoaXMuaXNCbG9iVXJsKHRyYWNrLmZpbGVfdXJsKTtcblx0XHRcdFx0XHRpZiAoKGlzQmxvYiB8fCAhdHJhY2suZmlsZV91cmwpICYmIHRyYWNrLmZpbGVfcGF0aCkge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0dHJhY2suZmlsZV91cmwgPSBhd2FpdCB0aGlzLmdldFNpZ25lZFVybChcblx0XHRcdFx0XHRcdFx0XHR0cmFjay5maWxlX3BhdGgsXG5cdFx0XHRcdFx0XHRcdFx0MjQgKiA2MCAqIDYwXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcdFx0XCJGYWlsZWQgdG8gc2lnbiBtdXNpYyB0cmFjayBwYXRoOlwiLFxuXHRcdFx0XHRcdFx0XHRcdHRyYWNrLmZpbGVfcGF0aCxcblx0XHRcdFx0XHRcdFx0XHRlXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdC8vIFNldCB0byBudWxsIHNvIFVJIGNhbiBoYW5kbGUgdGhlIGVycm9yXG5cdFx0XHRcdFx0XHRcdHRyYWNrLmZpbGVfdXJsID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRyYWNrO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Y29uc3QgcmF3RmlsZXMgPSBBcnJheS5pc0FycmF5KGdhbGxlcnk/LmZpbGVzKSA/IGdhbGxlcnkuZmlsZXMgOiBbXTtcblx0XHRcdGNvbnN0IGdhbGxlcnlGaWxlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0XHRyYXdGaWxlcy5tYXAoYXN5bmMgKGY6IGFueSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGZpbGUgPSB7IC4uLmYgfTtcblx0XHRcdFx0XHRjb25zdCBpc0Jsb2IgPSB0aGlzLmlzQmxvYlVybChmaWxlLmZpbGVfdXJsKTtcblx0XHRcdFx0XHRpZiAoKGlzQmxvYiB8fCAhZmlsZS5maWxlX3VybCkgJiYgZmlsZS5maWxlX3BhdGgpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGZpbGUuZmlsZV91cmwgPSBhd2FpdCB0aGlzLmdldFNpZ25lZFVybChcblx0XHRcdFx0XHRcdFx0XHRmaWxlLmZpbGVfcGF0aCxcblx0XHRcdFx0XHRcdFx0XHQyNCAqIDYwICogNjBcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XHRcdFx0XHRcIkZhaWxlZCB0byBzaWduIGdhbGxlcnkgZmlsZSBwYXRoOlwiLFxuXHRcdFx0XHRcdFx0XHRcdGZpbGUuZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0XHRcdGVcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0Ly8gU2V0IHRvIG51bGwgc28gVUkgY2FuIGhhbmRsZSB0aGUgZXJyb3Jcblx0XHRcdFx0XHRcdFx0ZmlsZS5maWxlX3VybCA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBmaWxlO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ucHJvZmlsZSxcblx0XHRcdFx0Li4udGVjaG5pY2FsLFxuXHRcdFx0XHQuLi5zb2NpYWwsXG5cdFx0XHRcdC4uLm5vdGVzLFxuXHRcdFx0XHRtdXNpY1RyYWNrcyxcblx0XHRcdFx0Z2FsbGVyeUZpbGVzLFxuXHRcdFx0fTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgYXJ0aXN0IGRhdGE6XCIsIGVycm9yKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBCYXRjaCBmZXRjaCBtdWx0aXBsZSBhcnRpc3RzIGVmZmljaWVudGx5XG5cdCAqL1xuXHRzdGF0aWMgYXN5bmMgYmF0Y2hHZXRBcnRpc3REYXRhKGFydGlzdElkczogc3RyaW5nW10pOiBQcm9taXNlPGFueVtdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEJhdGNoIGFsbCBmaWxlIHJlYWRzIGZvciBhbGwgYXJ0aXN0c1xuXHRcdFx0Y29uc3QgYWxsRmlsZVJlYWRzID0gYXJ0aXN0SWRzLmZsYXRNYXAoKGFydGlzdElkKSA9PiBbXG5cdFx0XHRcdHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vcHJvZmlsZS5qc29uYCksXG5cdFx0XHRcdHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vdGVjaG5pY2FsLmpzb25gKSxcblx0XHRcdFx0dGhpcy5yZWFkSlNPTihgYXJ0aXN0cy8ke2FydGlzdElkfS9zb2NpYWwuanNvbmApLFxuXHRcdFx0XHR0aGlzLnJlYWRKU09OKGBhcnRpc3RzLyR7YXJ0aXN0SWR9L25vdGVzLmpzb25gKSxcblx0XHRcdFx0dGhpcy5yZWFkSlNPTihgYXJ0aXN0cy8ke2FydGlzdElkfS9tdXNpYy5qc29uYCksXG5cdFx0XHRcdHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vZ2FsbGVyeS5qc29uYCksXG5cdFx0XHRdKTtcblxuXHRcdFx0Ly8gRXhlY3V0ZSBhbGwgcmVhZHMgaW4gcGFyYWxsZWxcblx0XHRcdGNvbnN0IGFsbFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChhbGxGaWxlUmVhZHMpO1xuXG5cdFx0XHQvLyBQcm9jZXNzIHJlc3VsdHMgZm9yIGVhY2ggYXJ0aXN0XG5cdFx0XHRjb25zdCBhcnRpc3RzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdGFydGlzdElkcy5tYXAoYXN5bmMgKGFydGlzdElkLCBpbmRleCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGJhc2VJbmRleCA9IGluZGV4ICogNjtcblx0XHRcdFx0XHRjb25zdCBbcHJvZmlsZSwgdGVjaG5pY2FsLCBzb2NpYWwsIG5vdGVzLCBtdXNpYywgZ2FsbGVyeV0gPVxuXHRcdFx0XHRcdFx0YWxsUmVzdWx0cy5zbGljZShiYXNlSW5kZXgsIGJhc2VJbmRleCArIDYpO1xuXG5cdFx0XHRcdFx0aWYgKCFwcm9maWxlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcm9jZXNzIG1lZGlhIGZpbGVzIHdpdGggbGF6eSBsb2FkaW5nIGFwcHJvYWNoXG5cdFx0XHRcdFx0Y29uc3QgcmF3VHJhY2tzID0gQXJyYXkuaXNBcnJheShtdXNpYz8udHJhY2tzKVxuXHRcdFx0XHRcdFx0PyBtdXNpYy50cmFja3Ncblx0XHRcdFx0XHRcdDogW107XG5cdFx0XHRcdFx0Y29uc3QgcmF3RmlsZXMgPSBBcnJheS5pc0FycmF5KGdhbGxlcnk/LmZpbGVzKVxuXHRcdFx0XHRcdFx0PyBnYWxsZXJ5LmZpbGVzXG5cdFx0XHRcdFx0XHQ6IFtdO1xuXG5cdFx0XHRcdFx0Ly8gT25seSBnZW5lcmF0ZSBzaWduZWQgVVJMcyBmb3IgbWVkaWEgdGhhdCB3aWxsIGJlIGltbWVkaWF0ZWx5IHZpc2libGVcblx0XHRcdFx0XHQvLyBGb3IgcGVyZm9ybWFuY2UsIHdlJ2xsIGRlZmVyIFVSTCBnZW5lcmF0aW9uIGZvciBnYWxsZXJ5IGZpbGVzXG5cdFx0XHRcdFx0Y29uc3QgbXVzaWNUcmFja3MgPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0XHRcdHJhd1RyYWNrcy5zbGljZSgwLCAzKS5tYXAoYXN5bmMgKHQ6IGFueSkgPT4ge1xuXHRcdFx0XHRcdFx0XHQvLyBPbmx5IGZpcnN0IDMgdHJhY2tzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRyYWNrID0geyAuLi50IH07XG5cdFx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmlzQmxvYlVybCh0cmFjay5maWxlX3VybCkgJiZcblx0XHRcdFx0XHRcdFx0XHR0cmFjay5maWxlX3BhdGhcblx0XHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRyYWNrLmZpbGVfdXJsID0gYXdhaXQgdGhpcy5nZXRTaWduZWRVcmwoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRyYWNrLmZpbGVfcGF0aCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0MjQgKiA2MCAqIDYwXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiRmFpbGVkIHRvIHNpZ24gbXVzaWMgdHJhY2sgcGF0aDpcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHJhY2suZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dHJhY2suZmlsZV91cmwgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJhY2s7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvLyBBZGQgcmVtYWluaW5nIHRyYWNrcyB3aXRob3V0IFVSTHMgKGxhenkgbG9hZGluZylcblx0XHRcdFx0XHRjb25zdCByZW1haW5pbmdUcmFja3MgPSByYXdUcmFja3Ncblx0XHRcdFx0XHRcdC5zbGljZSgzKVxuXHRcdFx0XHRcdFx0Lm1hcCgodDogYW55KSA9PiAoe1xuXHRcdFx0XHRcdFx0XHQuLi50LFxuXHRcdFx0XHRcdFx0XHRmaWxlX3VybDogdC5maWxlX3BhdGggPyBudWxsIDogdC5maWxlX3VybCwgLy8gTWFyayBmb3IgbGF6eSBsb2FkaW5nXG5cdFx0XHRcdFx0XHRcdG5lZWRzVXJsOiAhIXQuZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0fSkpO1xuXG5cdFx0XHRcdFx0Ly8gRm9yIGdhbGxlcnksIG9ubHkgcHJvY2VzcyBmaXJzdCBmZXcgaW1hZ2VzIGZvciBwcmV2aWV3XG5cdFx0XHRcdFx0Y29uc3QgZ2FsbGVyeUZpbGVzID0gcmF3RmlsZXMuc2xpY2UoMCwgNikubWFwKChmOiBhbnkpID0+ICh7XG5cdFx0XHRcdFx0XHQuLi5mLFxuXHRcdFx0XHRcdFx0dXJsOiBmLmZpbGVfcGF0aCA/IG51bGwgOiBmLnVybCwgLy8gTWFyayBmb3IgbGF6eSBsb2FkaW5nXG5cdFx0XHRcdFx0XHRuZWVkc1VybDogISFmLmZpbGVfcGF0aCxcblx0XHRcdFx0XHR9KSk7XG5cblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Li4ucHJvZmlsZSxcblx0XHRcdFx0XHRcdC4uLnRlY2huaWNhbCxcblx0XHRcdFx0XHRcdC4uLnNvY2lhbCxcblx0XHRcdFx0XHRcdC4uLm5vdGVzLFxuXHRcdFx0XHRcdFx0bXVzaWNUcmFja3M6IFsuLi5tdXNpY1RyYWNrcywgLi4ucmVtYWluaW5nVHJhY2tzXSxcblx0XHRcdFx0XHRcdGdhbGxlcnlGaWxlcyxcblx0XHRcdFx0XHRcdHRvdGFsTXVzaWNUcmFja3M6IHJhd1RyYWNrcy5sZW5ndGgsXG5cdFx0XHRcdFx0XHR0b3RhbEdhbGxlcnlGaWxlczogcmF3RmlsZXMubGVuZ3RoLFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHRyZXR1cm4gYXJ0aXN0cy5maWx0ZXIoKGFydGlzdCkgPT4gYXJ0aXN0ICE9PSBudWxsKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGJhdGNoIGdldHRpbmcgYXJ0aXN0IGRhdGE6XCIsIGVycm9yKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTGF6eSBsb2FkIG1lZGlhIFVSTHMgZm9yIGEgc3BlY2lmaWMgYXJ0aXN0XG5cdCAqL1xuXHRzdGF0aWMgYXN5bmMgbG9hZEFydGlzdE1lZGlhVXJscyhcblx0XHRhcnRpc3RJZDogc3RyaW5nLFxuXHRcdG1lZGlhVHlwZTogXCJtdXNpY1wiIHwgXCJnYWxsZXJ5XCIsXG5cdFx0c3RhcnRJbmRleDogbnVtYmVyID0gMCxcblx0XHRjb3VudDogbnVtYmVyID0gMTBcblx0KTogUHJvbWlzZTxhbnlbXT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBtZWRpYURhdGEgPVxuXHRcdFx0XHRtZWRpYVR5cGUgPT09IFwibXVzaWNcIlxuXHRcdFx0XHRcdD8gYXdhaXQgdGhpcy5yZWFkSlNPTihgYXJ0aXN0cy8ke2FydGlzdElkfS9tdXNpYy5qc29uYClcblx0XHRcdFx0XHQ6IGF3YWl0IHRoaXMucmVhZEpTT04oYGFydGlzdHMvJHthcnRpc3RJZH0vZ2FsbGVyeS5qc29uYCk7XG5cblx0XHRcdGNvbnN0IGl0ZW1zID1cblx0XHRcdFx0bWVkaWFUeXBlID09PSBcIm11c2ljXCJcblx0XHRcdFx0XHQ/IEFycmF5LmlzQXJyYXkobWVkaWFEYXRhPy50cmFja3MpXG5cdFx0XHRcdFx0XHQ/IG1lZGlhRGF0YS50cmFja3Ncblx0XHRcdFx0XHRcdDogW11cblx0XHRcdFx0XHQ6IEFycmF5LmlzQXJyYXkobWVkaWFEYXRhPy5maWxlcylcblx0XHRcdFx0XHQ/IG1lZGlhRGF0YS5maWxlc1xuXHRcdFx0XHRcdDogW107XG5cblx0XHRcdGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBpdGVtcy5zbGljZShzdGFydEluZGV4LCBzdGFydEluZGV4ICsgY291bnQpO1xuXG5cdFx0XHQvLyBHZW5lcmF0ZSBzaWduZWQgVVJMcyBmb3IgdGhlIHJlcXVlc3RlZCBpdGVtc1xuXHRcdFx0Y29uc3QgaXRlbXNXaXRoVXJscyA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0XHRzZWxlY3RlZEl0ZW1zLm1hcChhc3luYyAoaXRlbTogYW55KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdXJsRmllbGQgPSBtZWRpYVR5cGUgPT09IFwibXVzaWNcIiA/IFwiZmlsZV91cmxcIiA6IFwidXJsXCI7XG5cdFx0XHRcdFx0Y29uc3QgcGF0aEZpZWxkID1cblx0XHRcdFx0XHRcdG1lZGlhVHlwZSA9PT0gXCJtdXNpY1wiID8gXCJmaWxlX3BhdGhcIiA6IFwiZmlsZV9wYXRoXCI7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5pc0Jsb2JVcmwoaXRlbVt1cmxGaWVsZF0pICYmIGl0ZW1bcGF0aEZpZWxkXSkge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0aXRlbVt1cmxGaWVsZF0gPSBhd2FpdCB0aGlzLmdldFNpZ25lZFVybChcblx0XHRcdFx0XHRcdFx0XHRpdGVtW3BhdGhGaWVsZF0sXG5cdFx0XHRcdFx0XHRcdFx0MjQgKiA2MCAqIDYwXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcdFx0YEZhaWxlZCB0byBzaWduICR7bWVkaWFUeXBlfSBwYXRoOmAsXG5cdFx0XHRcdFx0XHRcdFx0aXRlbVtwYXRoRmllbGRdLFxuXHRcdFx0XHRcdFx0XHRcdGVcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0aXRlbVt1cmxGaWVsZF0gPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gaXRlbTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdHJldHVybiBpdGVtc1dpdGhVcmxzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRgRXJyb3IgbG9hZGluZyAke21lZGlhVHlwZX0gVVJMcyBmb3IgYXJ0aXN0ICR7YXJ0aXN0SWR9OmAsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgYWxsIGFydGlzdHMgZm9yIGFuIGV2ZW50IChzaW1wbGlmaWVkIGZvciBkZW1vKVxuXHQgKi9cblx0c3RhdGljIGFzeW5jIGdldEV2ZW50QXJ0aXN0cyhldmVudElkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEZvciBkZW1vIHB1cnBvc2VzLCB3ZSdsbCByZXR1cm4gYSBzYW1wbGUgYXJ0aXN0IGlmIG5vIHJlYWwgZGF0YSBleGlzdHNcblx0XHRcdGNvbnN0IHNhbXBsZUFydGlzdCA9IHtcblx0XHRcdFx0aWQ6IFwiYXJ0aXN0XzE3NTUwMTE0ODkyMDVfeHN3amN2ZmR2XCIsXG5cdFx0XHRcdGFydGlzdE5hbWU6IFwiV2F0ZXIgRmVzdGl2YWwgU3RhZ2VcIixcblx0XHRcdFx0cmVhbE5hbWU6IFwiSm9obiBXaWNrIChIdG9vIEF1bmcgV2FpKVwiLFxuXHRcdFx0XHRlbWFpbDogXCJqb2huQGdtYWlsLmNvbVwiLFxuXHRcdFx0XHRwaG9uZTogXCIwNTIgMjExIDYwMjRcIixcblx0XHRcdFx0c3R5bGU6IFwiRGVhdGggTWV0YWxcIixcblx0XHRcdFx0cGVyZm9ybWFuY2VUeXBlOiBcIm90aGVyXCIsXG5cdFx0XHRcdHBlcmZvcm1hbmNlRHVyYXRpb246IDUsXG5cdFx0XHRcdGJpb2dyYXBoeTogXCJJIGxpa2UgRGVhdGggTWV0YWwuXCIsXG5cdFx0XHRcdGNvc3R1bWVDb2xvcjogXCJyZWRcIixcblx0XHRcdFx0bGlnaHRDb2xvclNpbmdsZTogXCJibHVlXCIsXG5cdFx0XHRcdGxpZ2h0Q29sb3JUd286IFwibWFnZW50YVwiLFxuXHRcdFx0XHRsaWdodENvbG9yVGhyZWU6IFwiYW1iZXJcIixcblx0XHRcdFx0c3RhZ2VQb3NpdGlvblN0YXJ0OiBcImRvd25zdGFnZS1sZWZ0XCIsXG5cdFx0XHRcdHN0YWdlUG9zaXRpb25FbmQ6IFwibGVmdFwiLFxuXHRcdFx0XHRzb2NpYWxNZWRpYToge1xuXHRcdFx0XHRcdGluc3RhZ3JhbTogXCJodHRwczovL3d3dy5vZmZpY2VvbHltcGljcy5pb1wiLFxuXHRcdFx0XHRcdGZhY2Vib29rOiBcImh0dHBzOi8vd3d3Lm9mZmljZW9seW1waWNzLmlvXCIsXG5cdFx0XHRcdFx0eW91dHViZTogXCJodHRwczovL3d3dy5vZmZpY2VvbHltcGljcy5pb1wiLFxuXHRcdFx0XHRcdHRpa3RvazogXCJodHRwczovL3d3dy5vZmZpY2VvbHltcGljcy5pb1wiLFxuXHRcdFx0XHRcdHdlYnNpdGU6IFwiaHR0cHM6Ly93d3cub2ZmaWNlb2x5bXBpY3MuaW9cIixcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXZlbnRJZCxcblx0XHRcdFx0ZXZlbnROYW1lOiBcIkVETSBGZXN0aXZhbFwiLFxuXHRcdFx0XHRzdGF0dXM6IFwicGVuZGluZ1wiLFxuXHRcdFx0XHRjcmVhdGVkQXQ6IFwiMjAyNS0wOC0xMlQxNToxMToyOS4yMDVaXCIsXG5cdFx0XHRcdG11c2ljVHJhY2tzOiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c29uZ190aXRsZTogXCJNZXRhbFwiLFxuXHRcdFx0XHRcdFx0ZHVyYXRpb246IDIsXG5cdFx0XHRcdFx0XHRub3RlczogXCJObyBvbmVcIixcblx0XHRcdFx0XHRcdGlzX21haW5fdHJhY2s6IHRydWUsXG5cdFx0XHRcdFx0XHR0ZW1wbzogXCJtZWRpdW1cIixcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRdLFxuXHRcdFx0XHRnYWxsZXJ5RmlsZXM6IFtdLFxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBbc2FtcGxlQXJ0aXN0XSBhcyBhbnlbXTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgZXZlbnQgYXJ0aXN0czpcIiwgZXJyb3IpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBHQ1NTZXJ2aWNlO1xuIl0sIm5hbWVzIjpbIlN0b3JhZ2UiLCJzdG9yYWdlIiwiYnVja2V0IiwiYnVja2V0TmFtZSIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xPVURfQlVDS0VUX05BTUUiLCJHT09HTEVfQ0xPVURfUFJPSkVDVF9JRCIsInN0b3JhZ2VDb25maWciLCJwcm9qZWN0SWQiLCJHT09HTEVfQ0xPVURfS0VZX0ZJTEUiLCJrZXlGaWxlbmFtZSIsIkdPT0dMRV9DTE9VRF9DUkVERU5USUFMUyIsImNyZWRlbnRpYWxzIiwiSlNPTiIsInBhcnNlIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiRXJyb3IiLCJzaWduZWRVcmxDYWNoZSIsIk1hcCIsIkdDU1NlcnZpY2UiLCJpc0Jsb2JVcmwiLCJ1cmwiLCJzdGFydHNXaXRoIiwiY2xlYXJFeHBpcmVkQ2FjaGUiLCJub3ciLCJEYXRlIiwia2V5IiwiY2FjaGVkIiwiZW50cmllcyIsImV4cGlyZXNBdCIsImRlbGV0ZSIsImZpbGVFeGlzdHMiLCJwYXRoIiwiZ2NzRmlsZSIsImZpbGUiLCJleGlzdHMiLCJ1cGxvYWRGaWxlIiwiZmlsZW5hbWUiLCJmb2xkZXIiLCJjb250ZW50VHlwZSIsImdjc1BhdGgiLCJzYXZlIiwibWV0YWRhdGEiLCJwdWJsaWMiLCJzaWduZWRVcmwiLCJnZXRTaWduZWRVcmwiLCJzaXplIiwibGVuZ3RoIiwic2F2ZUpTT04iLCJkYXRhIiwianNvbkRhdGEiLCJzdHJpbmdpZnkiLCJyZWFkSlNPTiIsImNvbnRlbnRzIiwiZG93bmxvYWQiLCJ0b1N0cmluZyIsImxpc3RGaWxlcyIsInByZWZpeCIsImZpbGVzIiwiZ2V0RmlsZXMiLCJmaWxlTmFtZXMiLCJtYXAiLCJuYW1lIiwiZGVsZXRlRmlsZSIsImV4cGlyZXNJbiIsImNhY2hlS2V5IiwiZ2V0IiwiZXhwaXJhdGlvblRpbWUiLCJhY3Rpb24iLCJleHBpcmVzIiwic2V0Iiwic2F2ZUFydGlzdERhdGEiLCJhcnRpc3REYXRhIiwiYXJ0aXN0SWQiLCJpZCIsImV2ZW50SWQiLCJhcnRpc3ROYW1lIiwicmVhbE5hbWUiLCJlbWFpbCIsInBob25lIiwic3R5bGUiLCJwZXJmb3JtYW5jZVR5cGUiLCJwZXJmb3JtYW5jZUR1cmF0aW9uIiwiYmlvZ3JhcGh5IiwiY3JlYXRlZEF0Iiwic3RhdHVzIiwiZXZlbnROYW1lIiwiY29zdHVtZUNvbG9yIiwiY3VzdG9tQ29zdHVtZUNvbG9yIiwibGlnaHRDb2xvclNpbmdsZSIsImxpZ2h0Q29sb3JUd28iLCJsaWdodENvbG9yVGhyZWUiLCJsaWdodFJlcXVlc3RzIiwic3RhZ2VQb3NpdGlvblN0YXJ0Iiwic3RhZ2VQb3NpdGlvbkVuZCIsImN1c3RvbVN0YWdlUG9zaXRpb24iLCJlcXVpcG1lbnQiLCJzcGVjaWFsUmVxdWlyZW1lbnRzIiwic29jaWFsTWVkaWEiLCJzaG93TGluayIsIm1jTm90ZXMiLCJzdGFnZU1hbmFnZXJOb3RlcyIsIm5vdGVzIiwidHJhY2tzIiwibXVzaWNUcmFja3MiLCJnYWxsZXJ5RmlsZXMiLCJyZWdpc3RyYXRpb25EYXRlIiwiZ2V0QXJ0aXN0RGF0YSIsInByb2ZpbGUiLCJ0ZWNobmljYWwiLCJzb2NpYWwiLCJtdXNpYyIsImdhbGxlcnkiLCJQcm9taXNlIiwiYWxsIiwicmF3VHJhY2tzIiwiQXJyYXkiLCJpc0FycmF5IiwidCIsInRyYWNrIiwiaXNCbG9iIiwiZmlsZV91cmwiLCJmaWxlX3BhdGgiLCJlIiwicmF3RmlsZXMiLCJmIiwiYmF0Y2hHZXRBcnRpc3REYXRhIiwiYXJ0aXN0SWRzIiwiYWxsRmlsZVJlYWRzIiwiZmxhdE1hcCIsImFsbFJlc3VsdHMiLCJhcnRpc3RzIiwiaW5kZXgiLCJiYXNlSW5kZXgiLCJzbGljZSIsInJlbWFpbmluZ1RyYWNrcyIsIm5lZWRzVXJsIiwidG90YWxNdXNpY1RyYWNrcyIsInRvdGFsR2FsbGVyeUZpbGVzIiwiZmlsdGVyIiwiYXJ0aXN0IiwibG9hZEFydGlzdE1lZGlhVXJscyIsIm1lZGlhVHlwZSIsInN0YXJ0SW5kZXgiLCJjb3VudCIsIm1lZGlhRGF0YSIsIml0ZW1zIiwic2VsZWN0ZWRJdGVtcyIsIml0ZW1zV2l0aFVybHMiLCJpdGVtIiwidXJsRmllbGQiLCJwYXRoRmllbGQiLCJnZXRFdmVudEFydGlzdHMiLCJzYW1wbGVBcnRpc3QiLCJpbnN0YWdyYW0iLCJmYWNlYm9vayIsInlvdXR1YmUiLCJ0aWt0b2siLCJ3ZWJzaXRlIiwic29uZ190aXRsZSIsImR1cmF0aW9uIiwiaXNfbWFpbl90cmFjayIsInRlbXBvIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/google-cloud-storage.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@google-cloud","vendor-chunks/google-auth-library","vendor-chunks/tr46","vendor-chunks/readable-stream","vendor-chunks/bignumber.js","vendor-chunks/fast-xml-parser","vendor-chunks/semver","vendor-chunks/gaxios","vendor-chunks/teeny-request","vendor-chunks/node-fetch","vendor-chunks/whatwg-url","vendor-chunks/mime","vendor-chunks/jsonwebtoken","vendor-chunks/html-entities","vendor-chunks/json-bigint","vendor-chunks/event-target-shim","vendor-chunks/google-logging-utils","vendor-chunks/gcp-metadata","vendor-chunks/lodash.includes","vendor-chunks/debug","vendor-chunks/http-proxy-agent","vendor-chunks/https-proxy-agent","vendor-chunks/gtoken","vendor-chunks/agent-base","vendor-chunks/string_decoder","vendor-chunks/retry-request","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/retry","vendor-chunks/lodash.isinteger","vendor-chunks/duplexify","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/strnum","vendor-chunks/base64-js","vendor-chunks/lodash.isplainobject","vendor-chunks/abort-controller","vendor-chunks/extend","vendor-chunks/ms","vendor-chunks/end-of-stream","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/p-limit","vendor-chunks/async-retry","vendor-chunks/buffer-equal-constant-time","vendor-chunks/inherits","vendor-chunks/yocto-queue","vendor-chunks/once","vendor-chunks/wrappy","vendor-chunks/@tootallnate","vendor-chunks/stubs","vendor-chunks/is-stream","vendor-chunks/stream-shift","vendor-chunks/stream-events","vendor-chunks/arrify","vendor-chunks/util-deprecate"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CASUS%5CDownloads%5Cfame-event-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();